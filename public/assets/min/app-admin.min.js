"use strict";function TagController(e,t,n,i,r,a,s,o,l,c,u,d){function p(){r.filterCondition&&(e.currentPage=1);var t={page:e.currentPage,keyword:e.search.keyword,status:e.search.status,communityId:e.search.communityId,type:e.search.type,order:e.search.order};o.set("tag.filterData",{currentPage:e.currentPage,search:e.search}),n.query(t,function(t){u(function(){e.isLoading=!1},500),e.tags=t.items,e.totalItems=t.totalItems,e.itemsPerPage=t.itemsPerPage,e.numberVisiblePages=t.numberVisiblePages,e.totalPage=t.totalPage||1})}e.authentication=c,e.filePath="/files/tag/",e.webUrl=t.settings.services.webUrl,c.user.name||s.path("signin"),e.isLoading=!1,e.statuses=i.getTagStatus(),e.find=function(){if(e.isLoading=!0,$.isEmptyObject(s.search()))(t=o.get("tag.filterData"))?(e.currentPage=t.currentPage,e.search=t.search):(e.search={},e.currentPage=1);else{var t=s.search();e.currentPage=Number(t.currentPage)||1,e.search.keyword=t.keyword}p()},e.setPage=function(t){e.currentPage=t},e.pageChanged=function(t){e.currentPage=t,e.isLoading=!0,p()},e.create=function(t,i){e.submitted=!0,t?new n({name:this.name,slug:this.slug,status:this.status,count:this.count||0}).$save(function(t){if(t._id){e.isLoading=!0,a.setNotice("Save tag success!","SUCCESS"),i?e.gotoList():(s.path("tags/"+t._id+"/edit"),e.submitted=!1,e.name=null,a.requireChange())}else a.setNotice(t.message,"ERROR",!0)},function(e){a.setNotice(e.data.message,"ERROR",!0)}):a.setNotice("Please check your fields and try again!","ERROR",!0)},e.changeSlug=function(t,n){i="";if(t&&t.length>0)var i=slug(t).toLowerCase();n?e.tag.slug=i:e.slug=i},e.update=function(t,n){if(e.submitted=!0,t){var i=e.tag;delete i.__v,delete i.created,e.changeImage&&(e.tag.image=(new Date).getTime()+"."+e.extension),i.$update(function(t){if(t.error)a.setNotice(response.message,"ERROR",!0);else{e.isLoading=!0,a.setNotice("Update tag success!","SUCCESS"),n?e.gotoList():(e.submitted=!1,a.requireChange())}},function(e){a.setNotice(e.data.message,"ERROR",!0)})}else a.setNotice("Please check your fields and try again!","ERROR",!0)},e.remove=function(t){if(confirm("Do you want to remove?")){n.get({tagId:t}).$remove({tagId:t},function(){});for(var i in e.tags)e.tags[i]._id===t&&e.tags.splice(i,1);a.setNotice("Delete tag success!","SUCCESS"),r.tagId?e.gotoList():a.requireChange()}},e.gotoList=function(){s.path("tags")},e.filter=function(){e.currentPage=1,p()},e.reset=function(){r.filterCondition?e.gotoList():(e.search={},e.currentPage=1,p())},e.findOne=function(){e.tag=n.get({tagId:r.tagId},function(t){t.image&&(e.review_file_name=e.webUrl+"/files/tag/"+t.image)})},e.updateFinish=!1,e.convertCountTag=function(){n.convertCountTag(function(t){e.updateFinish=!0})},e.order=function(t){t?(void 0===e.search.order&&(e.search.order={}),e.search.order.field==t?"1"==e.search.order.type?e.search.order.type="-1":e.search.order.type="1":(e.search.order.field=t,e.search.order.type="1"),p()):(void 0===e.search&&(e.search={}),e.search.order={field:null,type:null})},e.order()}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){function n(e){return null!=e&&""!==e&&"hasOwnProperty"!==e&&s.test("."+e)}function i(e,i){if(!n(i))throw a("badmember",'Dotted member path "@{0}" is invalid.',i);for(var r=i.split("."),s=0,o=r.length;s<o&&t.isDefined(e);s++){var l=r[s];e=null!==e?e[l]:void 0}return e}function r(e,n){n=n||{},t.forEach(n,function(e,t){delete n[t]});for(var i in e)!e.hasOwnProperty(i)||"$"===i.charAt(0)&&"$"===i.charAt(1)||(n[i]=e[i]);return n}var a=t.$$minErr("$resource"),s=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;t.module("ngResource",["ng"]).info({angularVersion:"1.6.6"}).provider("$resource",function(){var e=/^https?:\/\/\[[^\]]*][^/]*/,n=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(s,o,l,c){function u(e,t){this.template=e,this.defaults=f({},n.defaults,t),this.urlParams={}}function d(e,t,b,w){function S(e,n){var r={};return n=f({},t,n),h(n,function(t,n){y(t)&&(t=t(e)),r[n]=t&&t.charAt&&"@"===t.charAt(0)?i(e,t.substr(1)):t}),r}function _(e){return e.resource}function x(e){r(e||{},this)}var C=new u(e,w);return b=f({},n.defaults.actions,b),x.prototype.toJSON=function(){var e=f({},this);return delete e.$promise,delete e.$resolved,delete e.$cancelRequest,e},h(b,function(e,t){var n=!0===e.hasBody||!1!==e.hasBody&&/^(POST|PUT|PATCH)$/i.test(e.method),i=e.timeout,u=v(e.cancellable)?e.cancellable:C.defaults.cancellable;i&&!$(i)&&(o.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete e.timeout,i=null),x[t]=function(o,d,v,$){var b,w,E,P={};switch(arguments.length){case 4:E=$,w=v;case 3:case 2:if(!y(d)){P=o,b=d,w=v;break}if(y(o)){w=o,E=d;break}w=d,E=v;case 1:y(o)?w=o:n?b=o:P=o;break;case 0:break;default:throw a("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A,k,I=this instanceof x,O=I?b:e.isArray?[]:new x(b),R={},T=e.interceptor&&e.interceptor.response||_,D=e.interceptor&&e.interceptor.responseError||void 0,U=!!E,M=!!D;h(e,function(e,t){switch(t){default:R[t]=g(e);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!I&&u&&(A=l.defer(),R.timeout=A.promise,i&&(k=c(A.resolve,i))),n&&(R.data=b),C.setUrlParams(R,f({},S(b,e.params||{}),P),e.url);var N=s(R).then(function(n){var i=n.data;if(i){if(m(i)!==!!e.isArray)throw a("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",t,e.isArray?"array":"object",m(i)?"array":"object",R.method,R.url);if(e.isArray)O.length=0,h(i,function(e){"object"===(void 0===e?"undefined":_typeof(e))?O.push(new x(e)):O.push(e)});else{var s=O.$promise;r(i,O),O.$promise=s}}return n.resource=O,n},function(e){return e.resource=O,l.reject(e)});return N=N.finally(function(){O.$resolved=!0,!I&&u&&(O.$cancelRequest=p,c.cancel(k),A=k=R.timeout=null)}),N=N.then(function(e){var t=T(e);return(w||p)(t,e.headers,e.status,e.statusText),t},U||M?function(e){return U&&!M&&N.catch(p),U&&E(e),M?D(e):l.reject(e)}:void 0),I?N:(O.$promise=N,O.$resolved=!1,u&&(O.$cancelRequest=function(e){N.catch(p),null!==A&&A.resolve(e)}),O)},x.prototype["$"+t]=function(e,n,i){y(e)&&(i=n,n=e,e={});var r=x[t].call(this,e,this,n,i);return r.$promise||r}}),x.bind=function(n){var i=f({},t,n);return d(e,i,b,w)},x}var p=t.noop,h=t.forEach,f=t.extend,g=t.copy,m=t.isArray,v=t.isDefined,y=t.isFunction,$=t.isNumber,b=t.$$encodeUriQuery,w=t.$$encodeUriSegment;return u.prototype={setUrlParams:function(t,n,i){var r,s,o=this,l=i||o.template,c="",u=o.urlParams=Object.create(null);h(l.split(/\W/),function(e){if("hasOwnProperty"===e)throw a("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(u[e]={isQueryParamValue:new RegExp("\\?.*=:"+e+"(?:\\W|$)").test(l)})}),l=l.replace(/\\:/g,":"),l=l.replace(e,function(e){return c=e,""}),n=n||{},h(o.urlParams,function(e,t){r=n.hasOwnProperty(t)?n[t]:o.defaults[t],v(r)&&null!==r?(s=e.isQueryParamValue?b(r,!0):w(r),l=l.replace(new RegExp(":"+t+"(\\W|$)","g"),function(e,t){return s+t})):l=l.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),function(e,t,n){return"/"===n.charAt(0)?n:t+n})}),o.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),t.url=c+l.replace(/\/(\\|%5C)\./,"/."),h(n,function(e,n){o.urlParams[n]||(t.params=t.params||{},t.params[n]=e)})}},d}]})}(window,window.angular),function(e,t){function n(e,n,i){var r=i.baseHref(),a=e[0];return function(e,i,s){var o,l;l=(s=s||{}).expires,o=t.isDefined(s.path)?s.path:r,t.isUndefined(i)&&(l="Thu, 01 Jan 1970 00:00:00 GMT",i=""),t.isString(l)&&(l=new Date(l)),i=(i=encodeURIComponent(e)+"="+encodeURIComponent(i))+(o?";path="+o:"")+(s.domain?";domain="+s.domain:""),i+=l?";expires="+l.toUTCString():"",4096<(s=(i+=s.secure?";secure":"").length+1)&&n.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+s+" > 4096 bytes)!"),a.cookie=i}}t.module("ngCookies",["ng"]).info({angularVersion:"1.6.6"}).provider("$cookies",[function(){var e=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(n,i){return{get:function(e){return n()[e]},getObject:function(e){return(e=this.get(e))?t.fromJson(e):e},getAll:function(){return n()},put:function(n,r,a){i(n,r,a?t.extend({},e,a):e)},putObject:function(e,n,i){this.put(e,t.toJson(n),i)},remove:function(n,r){i(n,void 0,r?t.extend({},e,r):e)}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,n){e.putObject(t,n)},remove:function(t){e.remove(t)}}}]),n.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=n})}(window,window.angular),function(e,t){var n=t.isDefined,i=t.isUndefined,r=t.isNumber,a=t.isObject,s=t.isArray,o=t.isString,l=t.extend,c=t.toJson;t.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/",secure:!1},this.defaultToCookie=!0,this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setDefaultToCookie=function(e){return this.defaultToCookie=!!e,this},this.setStorageCookie=function(e,t,n){return this.cookie.expiry=e,this.cookie.path=t,this.cookie.secure=n,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse","$timeout",function(e,t,u,d,p){function h(n){if(n||(n=t.event),y.setItem&&o(n.key)&&S(n.key)){var i=w(n.key);p(function(){e.$broadcast("LocalStorageModule.notification.changed",{key:i,newvalue:n.newValue,storageType:g.storageType})})}}var f,g=this,m=g.prefix,v=g.cookie,y=g.notify,$=g.storageType;u?u[0]&&(u=u[0]):u=document,"."!==m.substr(-1)&&(m=m?m+".":"");var b=function(e){return m+e},w=function(e){return e.replace(new RegExp("^"+m,"g"),"")},S=function(e){return 0===e.indexOf(m)},_=function(){try{var n=$ in t&&null!==t[$],i=b("__"+Math.round(1e7*Math.random()));return n&&((f=t[$]).setItem(i,""),f.removeItem(i)),n}catch(t){return g.defaultToCookie&&($="cookie"),e.$broadcast("LocalStorageModule.notification.error",t.message),!1}},x=_(),C=function(t,n,r){if(T(r),n=i(n)?null:c(n),!x&&g.defaultToCookie||"cookie"===g.storageType)return x||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),y.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:"cookie"}),k(t,n);try{f&&f.setItem(b(t),n),y.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:g.storageType})}catch(i){return e.$broadcast("LocalStorageModule.notification.error",i.message),k(t,n)}return!0},E=function(t,n){if(T(n),!x&&g.defaultToCookie||"cookie"===g.storageType)return x||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),I(t);var i=f?f.getItem(b(t)):null;if(!i||"null"===i)return null;try{return JSON.parse(i)}catch(e){return i}},P=function(){var t=0;arguments.length>=1&&("localStorage"===arguments[arguments.length-1]||"sessionStorage"===arguments[arguments.length-1])&&(t=1,T(arguments[arguments.length-1]));var n,i;for(n=0;n<arguments.length-t;n++)if(i=arguments[n],!x&&g.defaultToCookie||"cookie"===g.storageType)x||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),y.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:i,storageType:"cookie"}),O(i);else try{f.removeItem(b(i)),y.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:i,storageType:g.storageType})}catch(t){e.$broadcast("LocalStorageModule.notification.error",t.message),O(i)}},A=function(){try{return t.navigator.cookieEnabled||"cookie"in u&&(u.cookie.length>0||(u.cookie="test").indexOf.call(u.cookie,"test")>-1)}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}}(),k=function(t,n,o,l){if(i(n))return!1;if((s(n)||a(n))&&(n=c(n)),!A)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var d="",p=new Date,h="";if(null===n?(p.setTime(p.getTime()+-864e5),d="; expires="+p.toGMTString(),n=""):r(o)&&0!==o?(p.setTime(p.getTime()+24*o*60*60*1e3),d="; expires="+p.toGMTString()):0!==v.expiry&&(p.setTime(p.getTime()+24*v.expiry*60*60*1e3),d="; expires="+p.toGMTString()),t){var f="; path="+v.path;v.domain&&(h="; domain="+v.domain),"boolean"==typeof l?!0===l&&(h+="; secure"):!0===v.secure&&(h+="; secure"),u.cookie=b(t)+"="+encodeURIComponent(n)+d+f+h}}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),!1}return!0},I=function(t){if(!A)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var n=u.cookie&&u.cookie.split(";")||[],i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(b(t)+"=")){var a=decodeURIComponent(r.substring(m.length+t.length+1,r.length));try{var s=JSON.parse(a);return"number"==typeof s?a:s}catch(e){return a}}}return null},O=function(e){k(e,null)},R=function(){for(var e=null,t=m.length,n=u.cookie.split(";"),i=0;i<n.length;i++){for(e=n[i];" "===e.charAt(0);)e=e.substring(1,e.length);var r=e.substring(t,e.indexOf("="));O(r)}},T=function(e){return e&&$!==e&&($=e,x=_()),x};x&&(t.addEventListener?(t.addEventListener("storage",h,!1),e.$on("$destroy",function(){t.removeEventListener("storage",h)})):t.attachEvent&&(t.attachEvent("onstorage",h),e.$on("$destroy",function(){t.detachEvent("onstorage",h)})));return{isSupported:x,getStorageType:function(){return $},setStorageType:T,set:C,add:C,get:E,keys:function(t){if(T(t),!x)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var n=m.length,i=[];for(var r in f)if(r.substr(0,n)===m)try{i.push(r.substr(n))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.Description),[]}return i},remove:P,clearAll:function(t,n){T(n);var i=m?new RegExp("^"+m):new RegExp,r=t?new RegExp(t):new RegExp;if(!x&&g.defaultToCookie||"cookie"===g.storageType)return x||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),R();if(!x&&!g.defaultToCookie)return!1;var a=m.length;for(var s in f)if(i.test(s)&&r.test(s.substr(a)))try{P(s.substr(a))}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.message),R()}return!0},bind:function(e,t,i,r,s){var o=E(r=r||t,s);return null===o&&n(i)?o=i:a(o)&&a(i)&&(o=l(o,i)),d(t).assign(e,o),e.$watch(t,function(e){C(r,e,s)},a(e[t]))},deriveKey:b,underiveKey:w,length:function(e){T(e);for(var n=0,i=t[$],r=0;r<i.length;r++)0===i.key(r).indexOf(m)&&n++;return n},defaultToCookie:this.defaultToCookie,cookie:{isSupported:A,set:k,add:k,get:I,remove:O,clearAll:R}}}]})}(window,window.angular),function(e,t){function n(e){var t=[];return d(t,l).chars(e),t.join("")}var i,r,a,s,o,l,c,u,d,p=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",function(){function n(e,t){var n,i={},r=e.split(",");for(n=0;n<r.length;n++)i[t?o(r[n]):r[n]]=!0;return i}function h(e){for(var t={},n=0,i=e.length;n<i;n++){var r=e[n];t[r.name]=r.value}return t}function f(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace($,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,i=0,r=n.length;i<r;i++){var a=n[i],s=a.name.toLowerCase();"xmlns:ns1"!==s&&0!==s.lastIndexOf("ns1:",0)||(t.removeAttributeNode(a),i--,r--)}(n=t.firstChild)&&g(n),t=m("nextSibling",t)}}function m(e,t){var n=t[e];if(n&&c.call(t,n))throw p("elclob",t.outerHTML||t.outerText);return n}var v=!1;this.$get=["$$sanitizeUri",function(e){return v&&r(E,x),function(t){var n=[];return u(t,d(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return s(e)?(v=e,this):v},i=t.bind,r=t.extend,a=t.forEach,s=t.isDefined,o=t.lowercase,l=t.noop,u=function(e,t){null===e||void 0===e?e="":"string"!=typeof e&&(e=""+e);var n=k(e);if(!n)return"";var i=5;do{if(0===i)throw p("uinput");i--,e=n.innerHTML,n=k(e)}while(e!==n.innerHTML);for(i=n.firstChild;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),h(i.attributes));break;case 3:t.chars(i.textContent)}var r;if(!((r=i.firstChild)||(1===i.nodeType&&t.end(i.nodeName.toLowerCase()),r=m("nextSibling",i))))for(;null==r&&(i=m("parentNode",i))!==n;)r=m("nextSibling",i),1===i.nodeType&&t.end(i.nodeName.toLowerCase());i=r}for(;i=n.firstChild;)n.removeChild(i)},d=function(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=o(e),!n&&C[e]&&(n=e),n||!0!==E[e]||(r("<"),r(e),a(i,function(n,i){var a=o(i),s="img"===e&&"src"===a||"background"===a;!0!==A[a]||!0===P[a]&&!t(n,s)||(r(" "),r(i),r('="'),r(f(n)),r('"'))}),r(">"))},end:function(e){e=o(e),n||!0!==E[e]||!0===b[e]||(r("</"),r(e),r(">")),e==n&&(n=!1)},chars:function(e){n||r(f(e))}}},c=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$=/([^#-~ |!])/g,b=n("area,br,col,hr,img,wbr"),w=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),S=n("rp,rt"),_=r({},S,w),w=r({},w,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),S=r({},S,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),C=n("script,style"),E=r({},b,w,S,_),P=n("background,cite,href,longdesc,src,xlink:href"),_=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),S=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),A=r({},P,S,_),k=function(e,t){var n;if(!t||!t.implementation)throw p("noinert");var i=((n=t.implementation.createHTMLDocument("inert")).documentElement||n.getDocumentElement()).querySelector("body");return i.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',i.querySelector("svg")?(i.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',i.querySelector("svg img")?function(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){}}:function(e){return i.innerHTML=e,t.documentMode&&g(i),i}):function(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;return n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null),(t=n.response.body).firstChild.remove(),t}}(e,e.document)}).info({angularVersion:"1.6.6"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var i=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,a=t.$$minErr("linky"),s=t.isDefined,o=t.isFunction,l=t.isObject,c=t.isString;return function(t,u,d){function p(e){e&&v.push(n(e))}if(null==t||""===t)return t;if(!c(t))throw a("notstring",t);for(var h,f,g=o(d)?d:l(d)?function(){return d}:function(){return{}},m=t,v=[];t=m.match(i);)h=t[0],t[2]||t[4]||(h=(t[3]?"http://":"mailto:")+h),f=t.index,p(m.substr(0,f)),function(e,t){var n,i=g(e);v.push("<a ");for(n in i)v.push(n+'="'+i[n]+'" ');!s(u)||"target"in i||v.push('target="',u,'" '),v.push('href="',e.replace(/"/g,"&quot;"),'">'),p(t),v.push("</a>")}(h,t[0].replace(r,"")),m=m.substring(f+t[0].length);return p(m),e(v.join(""))}}])}(window,window.angular),function(e,t){function n(){return["$animate",function(e){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(t,n,i,a,s){var o,l=n[0],c=i.ngMessage||i.when,u=function(e){o=e?r(e)?e:e.split(/[\s,]+/):null,a.reRender()};(i=i.ngMessageExp||i.whenExp)?(u(t.$eval(i)),t.$watchCollection(i,u)):u(c);var d,p;a.register(l,p={test:function(e){var t=o;return e=t?r(t)?0<=t.indexOf(e):t.hasOwnProperty(e):void 0},attach:function(){d||s(function(t,i){e.enter(t,null,n);var r=(d=t).$$attachId=a.getAttachId();d.on("$destroy",function(){d&&d.$$attachId===r&&(a.deregister(l),p.detach()),i.$destroy()})})},detach:function(){if(d){var t=d;d=null,e.leave(t)}}})}}}]}var i,r,a,s;t.module("ngMessages",[],function(){i=t.forEach,r=t.isArray,a=t.isString,s=t.element}).info({angularVersion:"1.6.6"}).directive("ngMessages",["$animate",function(e){function t(e,t){return a(t)&&0===t.length||n(e.$eval(t))}function n(e){return a(e)?e.length:!!e}return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(r,a,s){function o(e,t){for(var n=t,i=[];n&&n!==e;){var r=n.$$ngMessageNode;if(r&&r.length)return h[r];n.childNodes.length&&-1===i.indexOf(n)?(i.push(n),n=n.childNodes[n.childNodes.length-1]):n.previousSibling?n=n.previousSibling:(n=n.parentNode,i.push(n))}}var l=this,c=0,u=0;this.getAttachId=function(){return u++};var d,p,h=this.messages={};this.render=function(o){d=!1,p=o=o||{};for(var c=t(a,s.ngMessagesMultiple)||t(a,s.multiple),u=[],h={},f=l.head,g=!1,m=0;null!=f;){m++;var v=f.message,y=!1;g||i(o,function(e,t){!y&&n(e)&&v.test(t)&&!h[t]&&(y=h[t]=!0,v.attach())}),y?g=!c:u.push(v),f=f.next}i(u,function(e){e.detach()}),u.length!==m?e.setClass(r,"ng-active","ng-inactive"):e.setClass(r,"ng-inactive","ng-active")},a.$watchCollection(s.ngMessages||s.for,l.render),r.on("$destroy",function(){i(h,function(e){e.message.detach()})}),this.reRender=function(){d||(d=!0,a.$evalAsync(function(){d&&p&&l.render(p)}))},this.register=function(e,t){var n=c.toString();h[n]={message:t};var i=r[0],a=h[n];l.head?(i=o(i,e))?(a.next=i.next,i.next=a):(a.next=l.head,l.head=a):l.head=a,e.$$ngMessageNode=n,c++,l.reRender()},this.deregister=function(e){var t=e.$$ngMessageNode;delete e.$$ngMessageNode;var n=h[t];(e=o(r[0],e))?e.next=n.next:l.head=n.next,delete h[t],l.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(e,t,n){function i(e,i){var r=n.$$createComment?n.$$createComment("ngMessagesInclude",i):t[0].createComment(" ngMessagesInclude: "+i+" "),r=s(r);e.after(r),e.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(t,r,s){var o=s.ngMessagesInclude||s.src;e(o).then(function(e){t.$$destroyed||(a(e)&&!e.trim()?i(r,o):n(e)(t,function(e){r.after(e),i(r,o)}))})}}}]).directive("ngMessage",n()).directive("ngMessageExp",n())}(window,window.angular),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var i=n(this);i instanceof Function&&i(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,t,n){function i(i){function r(e){c.notify&&c.notify(e),u.progressFunc&&n(function(){u.progressFunc(e)})}function o(e){return null!=i._start&&s?{loaded:e.loaded+i._start,total:i._file&&i._file.size||e.total,type:e.type,config:i,lengthComputable:!0,target:e.target}:e}function l(){e(i).then(function(e){if(s&&i._chunkSize&&!i._finished&&i._file){var t=i._file&&i._file.size||0;r({loaded:Math.min(i._end,t),total:t,config:i,type:"progress"}),a.upload(i,!0)}else i._finished&&delete i._finished,c.resolve(e)},function(e){c.reject(e)},function(e){c.notify(e)})}i.method=i.method||"POST",i.headers=i.headers||{};var c=i._deferred=i._deferred||t.defer(),u=c.promise;return i.disableProgress||(i.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(i.__XHR=e,i.xhrFn&&i.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=i,r(o(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=i,r(o(e)))},!1))}}),s?i._chunkSize&&i._end&&!i._finished?(i._start=i._end,i._end+=i._chunkSize,l()):i.resumeSizeUrl?e.get(i.resumeSizeUrl).then(function(e){i._start=i.resumeSizeResponseReader?i.resumeSizeResponseReader(e.data):parseInt((null==e.data.size?e.data:e.data.size).toString()),i._chunkSize&&(i._end=i._start+i._chunkSize),l()},function(e){throw e}):i.resumeSize?i.resumeSize().then(function(e){i._start=e,i._chunkSize&&(i._end=i._start+i._chunkSize),l()},function(e){throw e}):(i._chunkSize&&(i._start=0,i._end=i._start+i._chunkSize),l()):l(),u.success=function(e){return u.then(function(t){e(t.data,t.status,t.headers,i)}),u},u.error=function(e){return u.then(null,function(t){e(t.data,t.status,t.headers,i)}),u},u.progress=function(e){return u.progressFunc=e,u.then(null,null,function(t){e(t)}),u},u.abort=u.pause=function(){return i.__XHR&&n(function(){i.__XHR.abort()}),u},u.xhr=function(e){return i.xhrFn=function(t){return function(){t&&t.apply(u,arguments),e.apply(u,arguments)}}(i.xhrFn),u},a.promisesCount++,u.finally&&u.finally instanceof Function&&u.finally(function(){a.promisesCount--}),u}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var a=this;a.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var s=this.isResumeSupported();this.isUploadInProgress=function(){return a.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&s){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var i=t.slice(e._start,e._end||t.size);return i.name=t.name,i.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._chunkSize),n.append("_currentChunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),i}return t}function o(t,i,r){if(void 0!==i)if(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i))t.append(r,i);else if(a.isFile(i)){var s=n(i,t),l=r.split(",");l[1]&&(s.ngfName=l[1].replace(/^\s+|\s+$/g,""),r=l[0]),e._fileKey=e._fileKey||r,t.append(r,s,s.ngfName||s.name)}else if(angular.isObject(i)){if(i.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+r;i.$$ngfCircularDetection=!0;try{for(var c in i)if(i.hasOwnProperty(c)&&"$$ngfCircularDetection"!==c){var u=null==e.objectKey?"[i]":e.objectKey;i.length&&parseInt(c)>-1&&(u=null==e.arrayKey?u:e.arrayKey),o(t,i[c],r+u.replace(/[ik]/g,c))}}finally{delete i.$$ngfCircularDetection}}else t.append(r,i)}return t||(e=r(e)),e._isDigested||(e._isDigested=!0,e._chunkSize=a.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n,i=new window.FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(n in t)if(t.hasOwnProperty(n)){var r=t[n];e.formDataAppender?e.formDataAppender(i,n,r):o(i,r,n)}return i})),i(e)},this.http=function(t){return t=r(t),t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=a.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,i(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var i=t.defer();return e({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),r=e.headers("content-type")||"image/WebP",a=new window.Blob([t],{type:r}),s=n.match(/.*\/(.+?)(\?.*)?$/);s.length>1&&(a.name=s[1]),i.resolve(a)},function(e){i.reject(e)}),i.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,t,n,i,r){function a(e,t,n){var r=[l.emptyPromise()];return angular.forEach(e,function(i,a){0===i.type.indexOf("image/jpeg")&&l.attrGetter("ngfFixOrientation",t,n,{$file:i})&&r.push(l.happyPromise(l.applyExifRotation(i),i).then(function(t){e.splice(a,1,t)}))}),i.all(r)}function s(e,t,n,r){var a=l.attrGetter("ngfResize",t,n);if(!a||!l.isResizeSupported()||!e.length)return l.emptyPromise();if(a instanceof Function){var s=i.defer();return a(e).then(function(i){o(i,e,t,n,r).then(function(e){s.resolve(e)},function(e){s.reject(e)})},function(e){s.reject(e)})}return o(a,e,t,n,r)}function o(e,t,n,r,a){for(var s=[l.emptyPromise()],o=0;o<t.length;o++)!function(i,o){if(0===i.type.indexOf("image")){if(e.pattern&&!l.validatePattern(i,e.pattern))return;e.resizeIf=function(e,t){return l.attrGetter("ngfResizeIf",n,r,{$width:e,$height:t,$file:i})};var c=l.resize(i,e);s.push(c),c.then(function(e){t.splice(o,1,e)},function(e){i.$error="resize",(i.$errorMessages=i.$errorMessages||{}).resize=!0,i.$errorParam=(e?(e.message?e.message:e)+": ":"")+(i&&i.name),a.$ngfValidations.push({name:"resize",valid:!1}),l.applyModelValidation(a,t)})}}(t[o],o);return i.all(s)}var l=r;return l.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=l.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},l.attrGetter=function(t,n,i,r){var a=this.getAttrWithDefaults(n,t);if(!i)return a;try{return r?e(a)(i,r):e(a)(i)}catch(e){if(t.search(/min|max|pattern/i))return a;throw e}},l.shouldUpdateOn=function(e,t,n){var i=l.attrGetter("ngfModelOptions",t,n);return!i||!i.updateOn||i.updateOn.split(" ").indexOf(e)>-1},l.emptyPromise=function(){var e=i.defer(),n=arguments;return t(function(){e.resolve.apply(e,n)}),e.promise},l.rejectPromise=function(){var e=i.defer(),n=arguments;return t(function(){e.reject.apply(e,n)}),e.promise},l.happyPromise=function(e,n){var r=i.defer();return e.then(function(e){r.resolve(e)},function(e){t(function(){throw e}),r.resolve(n)}),r.promise},l.updateModel=function(n,i,r,o,c,u,d){function p(a,s,c,d,p){i.$$ngfPrevValidFiles=a,i.$$ngfPrevInvalidFiles=s;var h=a&&a.length?a[0]:null,f=s&&s.length?s[0]:null;n&&(l.applyModelValidation(n,a),n.$setViewValue(p?h:a)),o&&e(o)(r,{$files:a,$file:h,$newFiles:c,$duplicateFiles:d,$invalidFiles:s,$invalidFile:f,$event:u});var g=l.attrGetter("ngfModelInvalid",i);g&&t(function(){e(g).assign(r,p?f:s)}),t(function(){})}function h(){function e(){t(function(){p(b?g.concat($):$,b?m.concat(y):y,c,v,w)},_&&_.debounce?_.debounce.change||_.debounce:0)}var a=S?f:$;s(a,i,r,n).then(function(){S?l.validate(f,b?g.length:0,n,i,r).then(function(t){$=t.validsFiles,y=t.invalidsFiles,e()}):e()},function(){for(var t=0;t<a.length;t++){var n=a[t];if("resize"===n.$error){var i=$.indexOf(n);i>-1&&($.splice(i,1),y.push(n)),e()}}})}var f,g,m,v=[],y=[],$=[];g=i.$$ngfPrevValidFiles||[],m=i.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(g=function(e){return angular.isArray(e)?e:[e]}(n.$modelValue));var b=l.attrGetter("ngfKeep",i,r);f=(c||[]).slice(0),("distinct"===b||!0===l.attrGetter("ngfKeepDistinct",i,r))&&function(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}if(c){f=[],v=[];for(var t=0;t<c.length;t++)!function(t){var n;for(n=0;n<g.length;n++)if(e(t,g[n]))return!0;for(n=0;n<m.length;n++)if(e(t,m[n]))return!0;return!1}(c[t])?f.push(c[t]):v.push(c[t])}}();var w=!b&&!l.attrGetter("ngfMultiple",i,r)&&!l.attrGetter("multiple",i);if(!b||f.length){l.attrGetter("ngfBeforeModelChange",i,r,{$files:c,$file:c&&c.length?c[0]:null,$newFiles:f,$duplicateFiles:v,$event:u});var S=l.attrGetter("ngfValidateAfterResize",i,r),_=l.attrGetter("ngfModelOptions",i,r);l.validate(f,b?g.length:0,n,i,r).then(function(e){d?p(f,[],c,v,w):(_&&_.allowInvalid||S?$=f:($=e.validFiles,y=e.invalidFiles),l.attrGetter("ngfFixOrientation",i,r)&&l.isExifSupported()?a($,i,r).then(function(){h()}):h())})}},l}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,i){function r(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=i.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function a(e,t,n,i,a,o,l,c){function u(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return v("ngfChange")||v("ngfSelect")}function p(t){if(c.shouldUpdateOn("change",n,e)){var r=t.__files_||t.target&&t.target.files,a=[];if(!r)return;for(var s=0;s<r.length;s++)a.push(r[s]);c.updateModel(i,n,e,d(),a.length?a:null,t)}}function h(e,i){function r(t){e.attr("id","ngf-"+t),i.attr("id","ngf-label-"+t)}for(var a=0;a<t[0].attributes.length;a++){var s=t[0].attributes[a];"type"!==s.name&&"class"!==s.name&&"style"!==s.name&&("id"===s.name?(r(s.value),y.push(n.$observe("id",r))):e.attr(s.name,s.value||"required"!==s.name&&"multiple"!==s.name?s.value:s.name))}}function f(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return b=t[0].clientX,$=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,i=t[0].clientY;if(Math.abs(n-b)>20||Math.abs(i-$)>20)return e.stopPropagation(),e.preventDefault(),!1}return!0}}function g(t){c.shouldUpdateOn("click",n,e)&&w.val()&&(w.val(null),c.updateModel(i,n,e,d(),null,t,!0))}function m(e){if(w&&!w.attr("__ngf_ie10_Fix_")){if(!w[0].parentNode)return void(w=null);e.preventDefault(),e.stopPropagation(),w.unbind("click");var t=w.clone();return w.replaceWith(t),(w=t).attr("__ngf_ie10_Fix_","true"),w.bind("change",p),w.bind("click",m),w[0].click(),!1}w.removeAttr("__ngf_ie10_Fix_")}var v=function(e,t){return c.attrGetter(e,n,t)};c.registerModelChangeValidator(i,n,e);var y=[];v("ngfMultiple")&&y.push(e.$watch(v("ngfMultiple"),function(){w.attr("multiple",v("ngfMultiple",e))})),v("ngfCapture")&&y.push(e.$watch(v("ngfCapture"),function(){w.attr("capture",v("ngfCapture",e))})),v("ngfAccept")&&y.push(e.$watch(v("ngfAccept"),function(){w.attr("accept",v("ngfAccept",e))})),y.push(n.$observe("accept",function(){w.attr("accept",v("accept"))}));var $=0,b=0,w=t;u()||(w=function(){if(u())return t;var e=angular.element('<input type="file">'),n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),h(e,n),s.push({el:t,ref:n}),document.body.appendChild(n.append(e)[0]),e}()),w.bind("change",p),u()?t.bind("click",g):t.bind("click touchstart touchend",function(n){if(t.attr("disabled"))return!1;if(!v("ngfSelectDisabled",e)){var i=f(n);if(null!=i)return i;g(n);try{u()||document.body.contains(w[0])||(s.push({el:t,ref:w.parent()}),document.body.appendChild(w.parent()[0]),w.bind("change",p))}catch(e){}return r(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1}}),-1!==navigator.appVersion.indexOf("MSIE 10")&&w.bind("click",m),i&&i.$formatters.push(function(e){return(null==e||0===e.length)&&w.val()&&w.val(null),e}),e.$on("$destroy",function(){u()||w.parent().remove(),angular.forEach(y,function(e){e()})}),o(function(){for(var e=0;e<s.length;e++){var t=s[e];document.body.contains(t.el[0])||(s.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,w,p)}var s=[];return{restrict:"AEC",require:"?ngModel",link:function(e,n,r,s){a(e,n,r,s,0,t,0,i)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,i,r,a,s,o,l){function c(e){var s=t.attrGetter("ngfNoObjectUrl",a,i);t.dataUrl(e,s).finally(function(){n(function(){var t=(s?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;l?r.css("background-image","url('"+(t||"")+"')"):r.attr("src",t),t?r.removeClass("ng-hide"):r.addClass("ng-hide")})})}n(function(){var n=i.$watch(a[s],function(n){var u=o;if("ngfThumbnail"===s&&(u||(u={width:r[0].naturalWidth||r[0].clientWidth,height:r[0].naturalHeight||r[0].clientHeight}),0===u.width&&window.getComputedStyle)){var d=getComputedStyle(r[0]);d.width&&d.width.indexOf("px")>-1&&d.height&&d.height.indexOf("px")>-1&&(u={width:parseInt(d.width.slice(0,-2)),height:parseInt(d.height.slice(0,-2))})}return angular.isString(n)?(r.removeClass("ng-hide"),l?r.css("background-image","url('"+n+"')"):r.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(r[0]))||l&&0!==n.type.indexOf("image")?r.addClass("ng-hide"):u&&t.isResizeSupported()?(u.resizeIf=function(e,r){return t.attrGetter("ngfResizeIf",a,i,{$width:e,$height:r,$file:n})},t.resize(n,u).then(function(e){c(e)},function(e){throw e})):c(n))});i.$on("$destroy",function(){n()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var i=e;return i.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),r=0;return angular.forEach(e,function(n){i.dataUrl(n,!0).finally(function(){if(++r===e.length){var n=[];angular.forEach(e,function(e){n.push(e.$ngfDataUrl)}),t.resolve(n,e)}})}),t.promise}return i.dataUrl(e,!0)},i.dataUrl=function(e,r){if(!e)return i.emptyPromise(e,e);if(r&&null!=e.$ngfDataUrl||!r&&null!=e.$ngfBlobUrl)return i.emptyPromise(r?e.$ngfDataUrl:e.$ngfBlobUrl,e);var a=r?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(a)return a;var s=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!r){var a;try{a=n.createObjectURL(e)}catch(n){return void t(function(){e.$ngfBlobUrl="",s.reject()})}t(function(){if(e.$ngfBlobUrl=a,a){s.resolve(a,e),i.blobUrls=i.blobUrls||[],i.blobUrlsTotalSize=i.blobUrlsTotalSize||0,i.blobUrls.push({url:a,size:e.size}),i.blobUrlsTotalSize+=e.size||0;for(var t=i.defaults.blobUrlsMaxMemory||268435456,r=i.defaults.blobUrlsMaxQueueSize||200;(i.blobUrlsTotalSize>t||i.blobUrls.length>r)&&i.blobUrls.length>1;){var o=i.blobUrls.splice(0,1)[0];n.revokeObjectURL(o.url),i.blobUrlsTotalSize-=o.size}}})}else{var o=new FileReader;o.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,s.resolve(n.target.result,e),t(function(){delete e.$ngfDataUrl},1e3)})},o.onerror=function(){t(function(){e.$ngfDataUrl="",s.reject()})},o.readAsDataURL(e)}}else t(function(){e[r?"$ngfDataUrl":"$ngfBlobUrl"]="",s.reject()})}),(a=r?e.$$ngfDataUrlPromise=s.promise:e.$$ngfBlobUrlPromise=s.promise).finally(function(){delete e[r?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),a},i}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){t(e,n,i,r,a,"ngfSrc",e.attrGetter("ngfResize",a,i),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){t(e,n,i,r,a,"ngfBackground",e.attrGetter("ngfResize",a,i),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,r,a){var s=e.attrGetter("ngfSize",a,i);t(e,n,i,r,a,"ngfThumbnail",s,e.attrGetter("ngfAsBackground",a,i))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,t){return function(n,i,r){if(angular.isString(n))return t.trustAsResourceUrl(n);var a=n&&((i?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!a?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,i)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&a?r?t.trustAsResourceUrl(a):a:n)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function i(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var r=e.split(",");if(r.length>1)for(var a=0;a<r.length;a++){var s=i(r[a]);s.regexp?(t+="("+s.regexp+")",a<r.length-1&&(t+="|")):n=n.concat(s.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+i(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}function r(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}var a=e;return a.validatePattern=function(e,t){if(!t)return!0;var n=i(t),r=!0;if(n.regexp&&n.regexp.length){var a=new RegExp(n.regexp,"i");r=null!=e.type&&a.test(e.type)||null!=e.name&&a.test(e.name)}for(var s=n.excludes.length;s--;){var o=new RegExp(n.excludes[s],"i");r=r&&(null==e.type||o.test(e.type))&&(null==e.name||o.test(e.name))}return r},a.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},a.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push(function(i){if(e.$dirty){var r=i;i&&!angular.isArray(i)&&(r=[i]),a.validate(r,0,e,t,n).then(function(){a.applyModelValidation(e,r)})}return i})},a.applyModelValidation=function(e,t){r(e,t),angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})},a.getValidationAttr=function(e,t,n,i,r){var s="ngf"+n[0].toUpperCase()+n.substr(1),o=a.attrGetter(s,e,t,{$file:r});if(null==o&&(o=a.attrGetter("ngfValidate",e,t,{$file:r}))){var l=(i||n).split(".");o=o[l[0]],l.length>1&&(o=o&&o[l[1]])}return o},a.validate=function(e,n,i,r,s){function o(t,n,o){if(e){for(var l=e.length,c=null;l--;){var h=e[l];if(h){var f=a.getValidationAttr(r,s,t,n,h);null!=f&&(o(h,f,l)||(-1===u.indexOf(t)?(h.$error=t,(h.$errorMessages=h.$errorMessages||{})[t]=!0,h.$errorParam=f,-1===p.indexOf(h)&&p.push(h),d||e.splice(l,1),c=!1):e.splice(l,1)))}}null!==c&&i.$ngfValidations.push({name:t,valid:c})}}function l(n,o,l,h,f){function g(t,i,r){function a(a){if(a())if(-1===u.indexOf(n)){if(i.$error=n,(i.$errorMessages=i.$errorMessages||{})[n]=!0,i.$errorParam=r,-1===p.indexOf(i)&&p.push(i),!d){var s=e.indexOf(i);s>-1&&e.splice(s,1)}t.resolve(!1)}else{var o=e.indexOf(i);o>-1&&e.splice(o,1),t.resolve(!0)}else t.resolve(!0)}null!=r?h(i,r).then(function(e){a(function(){return!f(e,r)})},function(){a(function(){return c("ngfValidateForce",{$file:i})})}):t.resolve(!0)}var m=[a.emptyPromise(!0)];e&&(e=void 0===e.length?[e]:e,angular.forEach(e,function(e){var i=t.defer();return m.push(i.promise),!l||null!=e.type&&0===e.type.search(l)?void("dimensions"===n&&null!=a.attrGetter("ngfDimensions",r)?a.imageDimensions(e).then(function(t){g(i,e,c("ngfDimensions",{$file:e,$width:t.width,$height:t.height}))},function(){i.resolve(!1)}):"duration"===n&&null!=a.attrGetter("ngfDuration",r)?a.mediaDuration(e).then(function(t){g(i,e,c("ngfDuration",{$file:e,$duration:t}))},function(){i.resolve(!1)}):g(i,e,a.getValidationAttr(r,s,n,o,e))):void i.resolve(!0)}));var v=t.defer();return t.all(m).then(function(e){for(var t=!0,r=0;r<e.length;r++)if(!e[r]){t=!1;break}i.$ngfValidations.push({name:n,valid:t}),v.resolve(t)}),v.promise}(i=i||{}).$ngfValidations=i.$ngfValidations||[],angular.forEach(i.$ngfValidations,function(e){e.valid=!0});var c=function(e,t){return a.attrGetter(e,r,s,t)},u=(a.attrGetter("ngfIgnoreInvalid",r,s)||"").split(" "),d=a.attrGetter("ngfRunAllValidations",r,s);if(null==e||0===e.length)return a.emptyPromise({validFiles:e,invalidFiles:[]});e=void 0===e.length?[e]:e.slice(0);var p=[];o("pattern",null,a.validatePattern),o("minSize","size.min",function(e,t){return e.size+.1>=a.translateScalars(t)}),o("maxSize","size.max",function(e,t){return e.size-.1<=a.translateScalars(t)});var h=0;if(o("maxTotalSize",null,function(t,n){return!((h+=t.size)>a.translateScalars(n)&&(e.splice(0,e.length),1))}),o("validateFn",null,function(e,t){return!0===t||null===t||""===t}),!e.length)return a.emptyPromise({validFiles:[],invalidFiles:p});var f=t.defer(),g=[];return g.push(l("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),g.push(l("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),g.push(l("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),g.push(l("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),g.push(l("dimensions",null,/image/,function(e,t){return a.emptyPromise(t)},function(e){return e})),g.push(l("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),i=!1,r=0;r<n.length;r++)Math.abs(e.width/e.height-a.ratioToFloat(n[r]))<.01&&(i=!0);return i})),g.push(l("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-a.ratioToFloat(t)<1e-4})),g.push(l("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return e.width/e.height-a.ratioToFloat(t)>-1e-4})),g.push(l("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=a.translateScalars(t)})),g.push(l("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=a.translateScalars(t)})),g.push(l("duration",null,/audio|video/,function(e,t){return a.emptyPromise(t)},function(e){return e})),g.push(l("validateAsyncFn",null,null,function(e,t){return t},function(e){return!0===e||null===e||""===e})),t.all(g).then(function(){if(d)for(var t=0;t<e.length;t++)e[t].$error&&e.splice(t--,1);d=!1,o("maxFiles",null,function(e,t,i){return t>n+i}),f.resolve({validFiles:e,invalidFiles:p})}),f.promise},a.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var i=t.defer();return n(function(){i.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),i.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var r=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void r.reject("not image"):void a.dataUrl(e).then(function(t){function i(){var t=o[0].naturalWidth||o[0].clientWidth,n=o[0].naturalHeight||o[0].clientHeight;o.remove(),e.$ngfWidth=t,e.$ngfHeight=n,r.resolve({width:t,height:n})}function a(){o.remove(),r.reject("load error")}function s(){n(function(){o[0].parentNode&&(o[0].clientWidth?i():l++>10?a():s())},1e3)}var o=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");o.on("load",i),o.on("error",a);var l=0;s(),angular.element(document.getElementsByTagName("body")[0]).append(o)},function(){r.reject("load error")})}),e.$ngfDimensionPromise=r.promise,e.$ngfDimensionPromise.finally(function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},a.mediaDuration=function(e){if(e.$ngfDuration){var i=t.defer();return n(function(){i.resolve(e.$ngfDuration)}),i.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var r=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void r.reject("not media"):void a.dataUrl(e).then(function(t){function i(){var t=o[0].duration;e.$ngfDuration=t,o.remove(),r.resolve(t)}function a(){o.remove(),r.reject("load error")}function s(){n(function(){o[0].parentNode&&(o[0].duration?i():l>10?a():s())},1e3)}var o=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");o.on("loadedmetadata",i),o.on("error",a);var l=0;s(),angular.element(document.body).append(o)},function(){r.reject("load error")})}),e.$ngfDurationPromise=r.promise,e.$ngfDurationPromise.finally(function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},a}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var n=e,i=function(e,t,n,i,r){var a=r?Math.max(n/e,i/t):Math.min(n/e,i/t);return{width:e*a,height:t*a,marginX:e*a-n,marginY:t*a-i}},r=function(e,r,a,s,o,l,c,u){var d=t.defer(),p=document.createElement("canvas"),h=document.createElement("img");return h.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(h),h.onload=function(){var e=h.width,t=h.height;if(h.parentNode.removeChild(h),null==u||!1!==u(e,t))try{if(l){var f=n.ratioToFloat(l);f>e/t?(r=e,a=r/f):(a=t,r=a*f)}r||(r=e),a||(a=t);var g=i(e,t,r,a,c);p.width=Math.min(g.width,r),p.height=Math.min(g.height,a),p.getContext("2d").drawImage(h,Math.min(0,-g.marginX/2),Math.min(0,-g.marginY/2),g.width,g.height),d.resolve(p.toDataURL(o||"image/WebP",s||.934))}catch(e){d.reject(e)}else d.reject("resizeIf")},h.onerror=function(){h.parentNode.removeChild(h),d.reject()},h.src=e,d.promise};return n.dataUrltoBlob=function(e,t,n){for(var i=e.split(","),r=i[0].match(/:(.*?);/)[1],a=atob(i[1]),s=a.length,o=new Uint8Array(s);s--;)o[s]=a.charCodeAt(s);var l=new window.Blob([o],{type:r});return l.name=t,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,i){if(0!==e.type.indexOf("image"))return n.emptyPromise(e);var a=t.defer();return n.dataUrl(e,!0).then(function(t){r(t,i.width,i.height,i.quality,i.type||e.type,i.ratio,i.centerCrop,i.resizeIf).then(function(r){if("image/jpeg"===e.type&&!1!==i.restoreExif)try{r=n.restoreExif(t,r)}catch(e){setTimeout(function(){throw e},1)}try{var s=n.dataUrltoBlob(r,e.name,e.size);a.resolve(s)}catch(e){a.reject(e)}},function(t){"resizeIf"===t&&a.resolve(e),a.reject(t)})},function(e){a.reject(e)}),a.promise},n}]),function(){function e(e,n,i,r,a,s,o,l,c,u){function d(){return n.attr("disabled")||y("ngfDropDisabled",e)}function p(t,n,i){if(t){var r;try{r=t&&t.getData&&t.getData("text/html")}catch(e){}m(t.items,t.files,!1!==y("ngfAllowDir",e),y("multiple")||y("ngfMultiple",e)).then(function(e){e.length?h(e,n):f(i,r).then(function(e){h(e,n)})})}}function h(t,n){l.updateModel(r,i,e,y("ngfChange")||y("ngfDrop"),t,n)}function f(t,n){if(!l.shouldUpdateOn(t,i,e)||"string"!=typeof n)return l.rejectPromise([]);var r=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){r.push(n)});var a=[],s=[];if(r.length){angular.forEach(r,function(e){a.push(l.urlToBlob(e).then(function(e){s.push(e)}))});var o=u.defer();return u.all(a).then(function(){o.resolve(s)},function(e){o.reject(e)}),o.promise}return l.emptyPromise()}function g(e,t,n,i){var r=y("ngfDragOverClass",e,{$event:n}),a="dragover";if(angular.isString(r))a=r;else if(r&&(r.delay&&(S=r.delay),r.accept||r.reject)){var s=n.dataTransfer.items;if(null!=s&&s.length)for(var o=r.pattern||y("ngfPattern",e,{$event:n}),c=s.length;c--;){if(!l.validatePattern(s[c],o)){a=r.reject;break}a=r.accept}else a=r.accept}i(a)}function m(t,n,r,a){function s(e,t){var n=u.defer();if(null!=e)if(e.isDirectory){var i=[l.emptyPromise()];if(p){var r={type:"directory"};r.name=r.path=(t||"")+e.name,h.push(r)}var a=e.createReader(),o=[];!function r(){a.readEntries(function(a){try{a.length?(o=o.concat(Array.prototype.slice.call(a||[],0)),r()):(angular.forEach(o.slice(0),function(n){h.length<=c&&d>=f&&i.push(s(n,(t||"")+e.name+"/"))}),u.all(i).then(function(){n.resolve()},function(e){n.reject(e)}))}catch(e){n.reject(e)}},function(e){n.reject(e)})}()}else e.file(function(e){try{e.path=(t||"")+e.name,p&&(e=l.rename(e,e.path)),h.push(e),f+=e.size,n.resolve()}catch(e){n.reject(e)}},function(e){n.reject(e)});return n.promise}var c=l.getValidationAttr(i,e,"maxFiles");null==c&&(c=Number.MAX_VALUE);var d=l.getValidationAttr(i,e,"maxTotalSize");null==d&&(d=Number.MAX_VALUE);var p=y("ngfIncludeDir",e),h=[],f=0,g=[l.emptyPromise()];if(t&&t.length>0&&"file:"!==o.location.protocol)for(var m=0;m<t.length;m++){if(t[m].webkitGetAsEntry&&t[m].webkitGetAsEntry()&&t[m].webkitGetAsEntry().isDirectory){var v=t[m].webkitGetAsEntry();if(v.isDirectory&&!r)continue;null!=v&&g.push(s(v))}else{var $=t[m].getAsFile();null!=$&&(h.push($),f+=$.size)}if(h.length>c||f>d||!a&&h.length>0)break}else if(null!=n)for(var b=0;b<n.length;b++){var w=n.item(b);if((w.type||w.size>0)&&(h.push(w),f+=w.size),h.length>c||f>d||!a&&h.length>0)break}var S=u.defer();return u.all(g).then(function(){if(a||p||!h.length)S.resolve(h);else{for(var e=0;h[e]&&"directory"===h[e].type;)e++;S.resolve([h[e]])}},function(e){S.reject(e)}),S.promise}var v=t(),y=function(e,t,n){return l.attrGetter(e,i,t,n)};if(y("dropAvailable")&&s(function(){e[y("dropAvailable")]?e[y("dropAvailable")].value=v:e[y("dropAvailable")]=v}),v){null==y("ngfSelect")&&l.registerModelChangeValidator(r,i,e);var $,b=null,w=a(y("ngfStopPropagation")),S=1;n[0].addEventListener("dragover",function(t){if(!d()&&l.shouldUpdateOn("drop",i,e)){if(t.preventDefault(),w(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}s.cancel(b),$||($="C",g(e,0,t,function(i){$=i,n.addClass($),y("ngfDrag",e,{$isDragging:!0,$class:$,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!d()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),w(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!d()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),w(e)&&t.stopPropagation(),b=s(function(){$&&n.removeClass($),$=null,y("ngfDrag",e,{$isDragging:!1,$event:t})},S||100))},!1),n[0].addEventListener("drop",function(t){!d()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),w(e)&&t.stopPropagation(),$&&n.removeClass($),$=null,p(t.dataTransfer,t,"dropUrl"))},!1),n[0].addEventListener("paste",function(t){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&y("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!d()&&l.shouldUpdateOn("paste",i,e)&&p(t.clipboardData||t.originalEvent.clipboardData,t,"pasteUrl")},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&y("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}else!0===y("ngfHideOnDropNotAvailable",e)&&n.css("display","none")}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(t,n,i,r,a,s){return{restrict:"AEC",require:"?ngModel",link:function(a,o,l,c){e(a,o,l,c,t,n,i,r,0,s)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,i){return function(r,a,s){if(t()){var o=e(i.attrGetter("ngfDropAvailable",s));n(function(){o(r),o.assign&&o.assign(r,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,t){function n(e,t,n,i){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,i);case 4:return e.transform(1,0,0,-1,0,i);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,i,0);case 7:return e.transform(0,-1,-1,0,i,n);case 8:return e.transform(0,-1,1,0,0,n)}}function i(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,r=0;i>r;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)}var r=e;return r.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&r.isResizeSupported()},r.readOrientation=function(e){var n=t.defer(),i=new FileReader,r=e.slice?e.slice(0,65536):e;return i.readAsArrayBuffer(r),i.onerror=function(e){return n.reject(e)},i.onload=function(e){var t={orientation:1},i=new DataView(this.result);if(65496!==i.getUint16(0,!1))return n.resolve(t);for(var r=i.byteLength,a=2;r>a;){var s=i.getUint16(a,!1);if(a+=2,65505===s){if(1165519206!==i.getUint32(a+=2,!1))return n.resolve(t);var o=18761===i.getUint16(a+=6,!1);a+=i.getUint32(a+4,o);var l=i.getUint16(a,o);a+=2;for(var c=0;l>c;c++)if(274===i.getUint16(a+12*c,o)){var u=i.getUint16(a+12*c+8,o);return u>=2&&8>=u&&(i.setUint16(a+12*c+8,1,o),t.fixedArrayBuffer=e.target.result),t.orientation=u,n.resolve(t)}}else{if(65280!=(65280&s))break;a+=i.getUint16(a,!1)}}return n.resolve(t)},n.promise},r.applyExifRotation=function(e){if(0!==e.type.indexOf("image/jpeg"))return r.emptyPromise(e);var a=t.defer();return r.readOrientation(e).then(function(t){return t.orientation<2||t.orientation>8?a.resolve(e):void r.dataUrl(e,!0).then(function(s){var o=document.createElement("canvas"),l=document.createElement("img");l.onload=function(){try{o.width=t.orientation>4?l.height:l.width,o.height=t.orientation>4?l.width:l.height;var s=o.getContext("2d");n(s,t.orientation,l.width,l.height),s.drawImage(l,0,0);var c=o.toDataURL(e.type||"image/WebP",.934);c=r.restoreExif(i(t.fixedArrayBuffer),c);var u=r.dataUrltoBlob(c,e.name);a.resolve(u)}catch(e){return a.reject(e)}},l.onerror=function(){a.reject()},l.src=s},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise},r.restoreExif=function(e,t){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(e){var t,n,i,r,a,s="",o="",l="",c=0;do{i=(t=e[c++])>>2,r=(3&t)<<4|(n=e[c++])>>4,a=(15&n)<<2|(o=e[c++])>>6,l=63&o,isNaN(n)?a=l=64:isNaN(o)&&(l=64),s=s+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),t=n=o="",i=r=a=l=""}while(c<e.length);return s},n.restore=function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),i=this.slice2Segments(n),r=this.exifManipulation(t,i);return"data:image/jpeg;base64,"+this.encode64(r)},n.exifManipulation=function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)},n.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},n.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),a=i.slice(0,r),s=i.slice(r),o=a;return o=o.concat(t),o=o.concat(s)},n.slice2Segments=function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,i);n.push(r),t=i}if(t>e.length)break}return n},n.decode64=function(e){var t,n,i,r,a="",s="",o=0,l=[];/[^A-Za-z0-9\+\/\=]/g.exec(e)&&void 0,e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=this.KEY_STR.indexOf(e.charAt(o++))<<2|(i=this.KEY_STR.indexOf(e.charAt(o++)))>>4,n=(15&i)<<4|(r=this.KEY_STR.indexOf(e.charAt(o++)))>>2,a=(3&r)<<6|(s=this.KEY_STR.indexOf(e.charAt(o++))),l.push(t),64!==r&&l.push(n),64!==s&&l.push(a),t=n=a="",i=r=s=""}while(o<e.length);return l},n.restore(e,t)},r}]),function(){function e(e){return angular.isUndefined(e)||null===e}var t={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){switch(e.which){case t.COMMAND:case t.SHIFT:case t.CTRL:case t.ALT:return!0}return!!(e.metaKey||e.ctrlKey||e.altKey)},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123},isVerticalMovement:function(e){return~[t.UP,t.DOWN].indexOf(e)},isHorizontalMovement:function(e){return~[t.LEFT,t.RIGHT,t.BACKSPACE,t.DELETE].indexOf(e)},toSeparator:function(e){var n={ENTER:"\n",TAB:"\t",SPACE:" "}[e];return n||(t[e]?void 0:e)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(n.bind(t)(e))return t;t=t.parentElement}return!1});var n=0,i=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return n++},appendToBody:!1,spinnerEnabled:!1,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:!0}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments).message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(t)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,n,i,r){r(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return(""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n&&t?(""+t).replace(new RegExp(e(n),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);i.factory("$$uisDebounce",["$timeout",function(e){return function(t,n){var i;return function(){var r=this,a=Array.prototype.slice.call(arguments);i&&e.cancel(i),i=e(function(){t.apply(r,a)},n)}}}]),i.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,n,i,r){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){return t.addClass("ui-select-choices"),(t.parent().attr("theme")||e.theme)+"/choices.tpl.html"},compile:function(i,a){if(!a.repeat)throw n("repeat","Expected 'repeat' expression.");var s=a.groupBy,o=a.groupFilter;if(s){var l=i.querySelectorAll(".ui-select-choices-group");if(1!==l.length)throw n("rows","Expected 1 .ui-select-choices-group but got '{0}'.",l.length);l.attr("ng-repeat",t.getGroupNgRepeatExpression())}var c=t.parse(a.repeat),u=i.querySelectorAll(".ui-select-choices-row");if(1!==u.length)throw n("rows","Expected 1 .ui-select-choices-row but got '{0}'.",u.length);u.attr("ng-repeat",c.repeatExpression(s)).attr("ng-if","$select.open");var d=i.querySelectorAll(".ui-select-choices-row-inner");if(1!==d.length)throw n("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",d.length);return d.attr("uis-transclude-append",""),(r.document.addEventListener?u:d).attr("ng-click","$select.select("+c.itemName+",$select.skipFocusser,$event)"),function(t,n,r,a){a.parseRepeatAttr(r.repeat,s,o),a.disableChoiceExpression=r.uiDisableChoice,a.onHighlightCallback=r.onHighlight,a.minimumInputLength=parseInt(r.minimumInputLength)||0,a.dropdownPosition=r.position?r.position.toLowerCase():e.dropdownPosition,t.$watch("$select.search",function(e){e&&!a.open&&a.multiple&&a.activate(!1,!0),a.activeIndex=a.tagging.isActivated?-1:0,!r.minimumInputLength||a.search.length>=r.minimumInputLength?a.refresh(r.refresh):a.items=[]}),r.$observe("refreshDelay",function(){var n=t.$eval(r.refreshDelay);a.refreshDelay=void 0!==n?n:e.refreshDelay}),t.$watch("$select.open",function(e){e?(i.attr("role","listbox"),a.refresh(r.refresh)):n.removeAttr("role")})}}}}]),i.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(n,i,r,a,s,o,l,c,u,d,p){function h(e,t,n){if(e.findIndex)return e.findIndex(t,n);for(var i,r=Object(e),a=r.length>>>0,s=0;s<a;s++)if(i=r[s],t.call(n,i,s,r))return s;return-1}function f(){b.resetSearchInput&&(b.search=w,b.selected&&b.items.length&&!b.multiple&&(b.activeIndex=h(b.items,function(e){return angular.equals(this,e)},b.selected)))}function g(e,t){var n,i,r=[];for(n=0;n<t.length;n++)for(i=0;i<e.length;i++)e[i].name==[t[n]]&&r.push(e[i]);return r}function m(e,t){var n=x.indexOf(e);t&&-1===n&&x.push(e),!t&&n>-1&&x.splice(n,1)}function v(e){return x.indexOf(e)>-1}function y(e){var n=!0;switch(e){case t.DOWN:if(!b.open&&b.multiple)b.activate(!1,!0);else if(b.activeIndex<b.items.length-1)for(var i=++b.activeIndex;v(b.items[i])&&i<b.items.length;)b.activeIndex=++i;break;case t.UP:var r=0===b.search.length&&b.tagging.isActivated?-1:0;if(!b.open&&b.multiple)b.activate(!1,!0);else if(b.activeIndex>r)for(var a=--b.activeIndex;v(b.items[a])&&a>r;)b.activeIndex=--a;break;case t.TAB:b.multiple&&!b.open||b.select(b.items[b.activeIndex],!0);break;case t.ENTER:b.open&&(b.tagging.isActivated||b.activeIndex>=0)?b.select(b.items[b.activeIndex],b.skipFocusser):b.activate(!1,!0);break;case t.ESC:b.close();break;default:n=!1}return n}function $(){var e=i.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw l("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(b.activeIndex<0)){var n=t[b.activeIndex],r=n.offsetTop+n.clientHeight-e[0].scrollTop,a=e[0].offsetHeight;r>a?e[0].scrollTop+=r-a:r<n.clientHeight&&(b.isGrouped&&0===b.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=n.clientHeight-r)}}var b=this,w="";if(b.placeholder=c.placeholder,b.searchEnabled=c.searchEnabled,b.sortable=c.sortable,b.refreshDelay=c.refreshDelay,b.paste=c.paste,b.resetSearchInput=c.resetSearchInput,b.refreshing=!1,b.spinnerEnabled=c.spinnerEnabled,b.spinnerClass=c.spinnerClass,b.removeSelected=c.removeSelected,b.closeOnSelect=!0,b.skipFocusser=!1,b.search=w,b.activeIndex=0,b.items=[],b.open=!1,b.focus=!1,b.disabled=!1,b.selected=void 0,b.dropdownPosition="auto",b.focusser=void 0,b.multiple=void 0,b.disableChoiceExpression=void 0,b.tagging={isActivated:!1,fct:void 0},b.taggingTokens={isActivated:!1,tokens:void 0},b.lockChoiceExpression=void 0,b.clickTriggeredSelect=!1,b.$filter=a,b.$element=i,b.$animate=function(){try{return d.get("$animate")}catch(e){return null}}(),b.searchInput=i.querySelectorAll("input.ui-select-search"),1!==b.searchInput.length)throw l("searchInput","Expected 1 input.ui-select-search but got '{0}'.",b.searchInput.length);b.isEmpty=function(){return e(b.selected)||""===b.selected||b.multiple&&0===b.selected.length},b.activate=function(e,t){if(b.disabled||b.open)b.open&&!b.searchEnabled&&b.close();else{t||f(),n.$broadcast("uis:activate"),b.open=!0,b.activeIndex=b.activeIndex>=b.items.length?0:b.activeIndex,-1===b.activeIndex&&!1!==b.taggingLabel&&(b.activeIndex=0);var a=i.querySelectorAll(".ui-select-choices-content"),s=i.querySelectorAll(".ui-select-search");if(b.$animate&&b.$animate.on&&b.$animate.enabled(a[0])){var o=function t(n,i){"start"===i&&0===b.items.length?(b.$animate.off("removeClass",s[0],t),r(function(){b.focusSearchInput(e)})):"close"===i&&(b.$animate.off("enter",a[0],t),r(function(){b.focusSearchInput(e)}))};b.items.length>0?b.$animate.on("enter",a[0],o):b.$animate.on("removeClass",s[0],o)}else r(function(){b.focusSearchInput(e),!b.tagging.isActivated&&b.items.length>1&&$()})}},b.focusSearchInput=function(e){b.search=e||b.search,b.searchInput[0].focus()},b.findGroupByName=function(e){return b.groups&&b.groups.filter(function(t){return t.name===e})[0]},b.parseRepeatAttr=function(e,t,i){b.setItemsFn=t?function(e){var r=n.$eval(t);if(b.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(r)?r(e):e[r],n=b.findGroupByName(t);n?n.items.push(e):b.groups.push({name:t,items:[e]})}),i){var a=n.$eval(i);angular.isFunction(a)?b.groups=a(b.groups):angular.isArray(a)&&(b.groups=g(b.groups,a))}b.items=[],b.groups.forEach(function(e){b.items=b.items.concat(e.items)})}:function(e){b.items=e||[]},b.parserResult=o.parse(e),b.isGrouped=!!t,b.itemProperty=b.parserResult.itemName;var r=b.parserResult.source,a=function(){var e=r(n);n.$uisSource=Object.keys(e).map(function(t){var n={};return n[b.parserResult.keyName]=t,n.value=e[t],n})};b.parserResult.keyName&&(a(),b.parserResult.source=u("$uisSource"+b.parserResult.filters),n.$watch(r,function(e,t){e!==t&&a()},!0)),b.refreshItems=function(e){e=e||b.parserResult.source(n);var t=b.selected;if(b.isEmpty()||angular.isArray(t)&&!t.length||!b.multiple||!b.removeSelected)b.setItemsFn(e);else if(void 0!==e&&null!==e){var i=e.filter(function(e){return angular.isArray(t)?t.every(function(t){return!angular.equals(e,t)}):!angular.equals(e,t)});b.setItemsFn(i)}"auto"!==b.dropdownPosition&&"up"!==b.dropdownPosition||n.calculateDropdownPos(),n.$broadcast("uis:refresh")},n.$watchCollection(b.parserResult.source,function(e){if(void 0===e||null===e)b.items=[];else{if(!angular.isArray(e))throw l("items","Expected an array but got '{0}'.",e);b.refreshItems(e),angular.isDefined(b.ngModel.$modelValue)&&(b.ngModel.$modelValue=null)}})};var S;b.refresh=function(e){void 0!==e&&(S&&r.cancel(S),S=r(function(){if(n.$select.search.length>=n.$select.minimumInputLength){var t=n.$eval(e);t&&angular.isFunction(t.then)&&!b.refreshing&&(b.refreshing=!0,t.finally(function(){b.refreshing=!1}))}},b.refreshDelay))},b.isActive=function(e){if(!b.open)return!1;var t=b.items.indexOf(e[b.itemProperty]),n=t==b.activeIndex;return!(!n||t<0)&&(n&&!angular.isUndefined(b.onHighlightCallback)&&e.$eval(b.onHighlightCallback),n)};var _=function(e){return b.selected&&angular.isArray(b.selected)&&b.selected.filter(function(t){return angular.equals(t,e)}).length>0},x=[];b.isDisabled=function(e){if(b.open){var t=e[b.itemProperty],n=!1;if(b.items.indexOf(t)>=0&&(angular.isDefined(b.disableChoiceExpression)||b.multiple)){if(t.isTag)return!1;b.multiple&&(n=_(t)),!n&&angular.isDefined(b.disableChoiceExpression)&&(n=!!e.$eval(b.disableChoiceExpression)),m(t,n)}return n}},b.select=function(t,i,r){if(e(t)||!v(t)){if(!b.items&&!b.search&&!b.tagging.isActivated)return;if(!t||!v(t)){if(b.clickTriggeredSelect=!1,r&&("click"===r.type||"touchend"===r.type)&&t&&(b.clickTriggeredSelect=!0),b.tagging.isActivated&&!1===b.clickTriggeredSelect){if(!1===b.taggingLabel)if(b.activeIndex<0){if(void 0===t&&(t=void 0!==b.tagging.fct?b.tagging.fct(b.search):b.search),!t||angular.equals(b.items[0],t))return}else t=b.items[b.activeIndex];else if(0===b.activeIndex){if(void 0===t)return;if(void 0!==b.tagging.fct&&"string"==typeof t){if(!(t=b.tagging.fct(t)))return}else"string"==typeof t&&(t=t.replace(b.taggingLabel,"").trim())}if(_(t))return void b.close(i)}f(),n.$broadcast("uis:select",t),b.closeOnSelect&&b.close(i)}}},b.close=function(e){b.open&&(b.ngModel&&b.ngModel.$setTouched&&b.ngModel.$setTouched(),b.open=!1,f(),n.$broadcast("uis:close",e))},b.setFocus=function(){b.focus||b.focusInput[0].focus()},b.clear=function(e){b.select(null),e.stopPropagation(),r(function(){b.focusser[0].focus()},0,!1)},b.toggle=function(e){b.open?(b.close(),e.preventDefault(),e.stopPropagation()):b.activate()},b.isLocked=function(){return!1},n.$watch(function(){return angular.isDefined(b.lockChoiceExpression)&&""!==b.lockChoiceExpression},function(e){function t(e,t){var n=i.indexOf(e);t&&-1===n&&i.push(e),!t&&n>-1&&i.splice(n,1)}function n(e){return i.indexOf(e)>-1}if(e){var i=[];b.isLocked=function(e,i){var r=!1,a=b.selected[i];return a&&(e?(r=!!e.$eval(b.lockChoiceExpression),t(a,r)):r=n(a)),r}}});var C=null,E=!1;b.sizeSearchInput=function(){var e=b.searchInput[0],t=b.$element[0],i=function(){return t.clientWidth*!!e.offsetParent},a=function(t){if(0===t)return!1;var n=t-e.offsetLeft;return n<50&&(n=t),b.searchInput.css("width",n+"px"),!0};b.searchInput.css("width","10px"),r(function(){null!==C||a(i())||(C=n.$watch(function(){E||(E=!0,n.$$postDigest(function(){E=!1,a(i())&&(C(),C=null)}))},angular.noop))})},b.searchInput.on("keydown",function(e){var i=e.which;~[t.ENTER,t.ESC].indexOf(i)&&(e.preventDefault(),e.stopPropagation()),n.$apply(function(){var n=!1;if((b.items.length>0||b.tagging.isActivated)&&(y(i)||b.searchEnabled||(e.preventDefault(),e.stopPropagation()),b.taggingTokens.isActivated)){for(var a=0;a<b.taggingTokens.tokens.length;a++)b.taggingTokens.tokens[a]===t.MAP[e.keyCode]&&b.search.length>0&&(n=!0);n&&r(function(){b.searchInput.triggerHandler("tagged");var n=b.search.replace(t.MAP[e.keyCode],"").trim();b.tagging.fct&&(n=b.tagging.fct(n)),n&&b.select(n,!0)})}}),t.isVerticalMovement(i)&&b.items.length>0&&$(),i!==t.ENTER&&i!==t.ESC||(e.preventDefault(),e.stopPropagation())}),b.searchInput.on("paste",function(e){var n;if(n=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(e.originalEvent||e).clipboardData.getData("text/plain"),(n=b.search+n)&&n.length>0)if(b.taggingTokens.isActivated){for(var i=[],r=0;r<b.taggingTokens.tokens.length;r++){var a=t.toSeparator(b.taggingTokens.tokens[r])||b.taggingTokens.tokens[r];if(n.indexOf(a)>-1){i=n.split(a);break}}0===i.length&&(i=[n]);var s=b.search;angular.forEach(i,function(e){var t=b.tagging.fct?b.tagging.fct(e):e;t&&b.select(t,!0)}),b.search=s||w,e.preventDefault(),e.stopPropagation()}else b.paste&&(b.paste(n),b.search=w,e.preventDefault(),e.stopPropagation())}),b.searchInput.on("tagged",function(){r(function(){f()})});var P=s(function(){b.sizeSearchInput()},50);angular.element(p).bind("resize",P),n.$on("$destroy",function(){b.searchInput.off("keyup keydown tagged blur paste"),angular.element(p).off("resize",P)}),n.$watch("$select.activeIndex",function(e){e&&i.find("input").attr("aria-activedescendant","ui-select-choices-row-"+b.generatedId+"-"+e)}),n.$watch("$select.open",function(e){e||i.find("input").removeAttr("aria-activedescendant")})}]),i.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,n,i,r,a,s){return{restrict:"EA",templateUrl:function(e,n){return(n.theme||t.theme)+(angular.isDefined(n.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(r,o){var l=/{(.*)}\s*{(.*)}/.exec(o.ngClass);if(l){var c="{"+l[1]+", "+l[2]+"}";o.ngClass=c,r.attr("ng-class",c)}return angular.isDefined(o.multiple)?r.append("<ui-select-multiple/>").removeAttr("multiple"):r.append("<ui-select-single/>"),o.inputId&&(r.querySelectorAll("input.ui-select-search")[0].id=o.inputId),function(r,o,l,c,u){function d(e){if(f.open){if(!(window.jQuery?window.jQuery.contains(o[0],e.target):o[0].contains(e.target))&&!f.clickTriggeredSelect){var t;if(f.skipFocusser)t=!0;else{var n=["input","button","textarea","select"],i=angular.element(e.target).controller("uiSelect");(t=i&&i!==f)||(t=~n.indexOf(e.target.tagName.toLowerCase()))}f.close(t),r.$digest()}f.clickTriggeredSelect=!1}}function p(){var t=i(o);(v=angular.element('<div class="ui-select-placeholder"></div>'))[0].style.width=t.width+"px",v[0].style.height=t.height+"px",o.after(v),y=o[0].style.width,e.find("body").append(o),o[0].style.position="absolute",o[0].style.left=t.left+"px",o[0].style.top=t.top+"px",o[0].style.width=t.width+"px"}function h(){null!==v&&(v.replaceWith(o),v=null,o[0].style.position="",o[0].style.left="",o[0].style.top="",o[0].style.width=y,f.setFocus())}var f=c[0],g=c[1];f.generatedId=t.generateId(),f.baseTitle=l.title||"Select box",f.focusserTitle=f.baseTitle+" focus",f.focusserId="focusser-"+f.generatedId,f.closeOnSelect=angular.isDefined(l.closeOnSelect)?a(l.closeOnSelect)():t.closeOnSelect,r.$watch("skipFocusser",function(){var e=r.$eval(l.skipFocusser);f.skipFocusser=void 0!==e?e:t.skipFocusser}),f.onSelectCallback=a(l.onSelect),f.onRemoveCallback=a(l.onRemove),f.ngModel=g,f.choiceGrouped=function(e){return f.isGrouped&&e&&e.name},l.tabindex&&l.$observe("tabindex",function(e){f.focusInput.attr("tabindex",e),o.removeAttr("tabindex")}),r.$watch(function(){return r.$eval(l.searchEnabled)},function(e){f.searchEnabled=void 0!==e?e:t.searchEnabled}),r.$watch("sortable",function(){var e=r.$eval(l.sortable);f.sortable=void 0!==e?e:t.sortable}),l.$observe("backspaceReset",function(){var e=r.$eval(l.backspaceReset);f.backspaceReset=void 0===e||e}),l.$observe("limit",function(){f.limit=angular.isDefined(l.limit)?parseInt(l.limit,10):void 0}),r.$watch("removeSelected",function(){var e=r.$eval(l.removeSelected);f.removeSelected=void 0!==e?e:t.removeSelected}),l.$observe("disabled",function(){f.disabled=void 0!==l.disabled&&l.disabled}),l.$observe("resetSearchInput",function(){var e=r.$eval(l.resetSearchInput);f.resetSearchInput=void 0===e||e}),l.$observe("paste",function(){f.paste=r.$eval(l.paste)}),l.$observe("tagging",function(){if(void 0!==l.tagging){var e=r.$eval(l.tagging);f.tagging={isActivated:!0,fct:!0!==e?e:void 0}}else f.tagging={isActivated:!1,fct:void 0}}),l.$observe("taggingLabel",function(){void 0!==l.tagging&&("false"===l.taggingLabel?f.taggingLabel=!1:f.taggingLabel=void 0!==l.taggingLabel?l.taggingLabel:"(new)")}),l.$observe("taggingTokens",function(){if(void 0!==l.tagging){var e=void 0!==l.taggingTokens?l.taggingTokens.split("|"):[",","ENTER"];f.taggingTokens={isActivated:!0,tokens:e}}}),l.$observe("spinnerEnabled",function(){var e=r.$eval(l.spinnerEnabled);f.spinnerEnabled=void 0!==e?e:t.spinnerEnabled}),l.$observe("spinnerClass",function(){var e=l.spinnerClass;f.spinnerClass=void 0!==e?l.spinnerClass:t.spinnerClass}),angular.isDefined(l.autofocus)&&s(function(){f.setFocus()}),angular.isDefined(l.focusOn)&&r.$on(l.focusOn,function(){s(function(){f.setFocus()})}),e.on("click",d),r.$on("$destroy",function(){e.off("click",d)}),u(r,function(e){var t=angular.element("<div>").append(e),i=t.querySelectorAll(".ui-select-match");if(i.removeAttr("ui-select-match"),i.removeAttr("data-ui-select-match"),1!==i.length)throw n("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);o.querySelectorAll(".ui-select-match").replaceWith(i);var r=t.querySelectorAll(".ui-select-choices");if(r.removeAttr("ui-select-choices"),r.removeAttr("data-ui-select-choices"),1!==r.length)throw n("transcluded","Expected 1 .ui-select-choices but got '{0}'.",r.length);o.querySelectorAll(".ui-select-choices").replaceWith(r);var a=t.querySelectorAll(".ui-select-no-choice");a.removeAttr("ui-select-no-choice"),a.removeAttr("data-ui-select-no-choice"),1==a.length&&o.querySelectorAll(".ui-select-no-choice").replaceWith(a)});var m=r.$eval(l.appendToBody);(void 0!==m?m:t.appendToBody)&&(r.$watch("$select.open",function(e){e?p():h()}),r.$on("$destroy",function(){h()}));var v=null,y="",$=null,b="direction-up";r.$watch("$select.open",function(){"auto"!==f.dropdownPosition&&"up"!==f.dropdownPosition||r.calculateDropdownPos()});var w=function(e,t){e=e||i(o),t=t||i($),$[0].style.position="absolute",$[0].style.top=-1*t.height+"px",o.addClass(b)},S=function(e,t){o.removeClass(b),e=e||i(o),t=t||i($),$[0].style.position="",$[0].style.top=""},_=function(){s(function(){if("up"===f.dropdownPosition)w();else{o.removeClass(b);var t=i(o),n=i($),r=e[0].documentElement.scrollTop||e[0].body.scrollTop;t.top+t.height+n.height>r+e[0].documentElement.clientHeight?w(t,n):S(t,n)}$[0].style.opacity=1})},x=!1;r.calculateDropdownPos=function(){if(f.open){if(0===($=angular.element(o).querySelectorAll(".ui-select-dropdown")).length)return;if(""!==f.search||x||($[0].style.opacity=0,x=!0),!i($).height&&f.$animate&&f.$animate.on&&f.$animate.enabled($)){var e=!0;f.$animate.on("enter",$,function(t,n){"close"===n&&e&&(_(),e=!1)})}else _()}else{if(null===$||0===$.length)return;$[0].style.opacity=0,$[0].style.position="",$[0].style.top="",o.removeClass(b)}}}}}}]),i.directive("uiSelectMatch",["uiSelectConfig",function(e){function t(e,t){return e[0].hasAttribute(t)?e.attr(t):e[0].hasAttribute("data-"+t)?e.attr("data-"+t):e[0].hasAttribute("x-"+t)?e.attr("x-"+t):void 0}return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(n){n.addClass("ui-select-match");var i=n.parent();return(t(i,"theme")||e.theme)+(angular.isDefined(t(i,"multiple"))?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,n,i,r){function a(e){r.allowClear=!!angular.isDefined(e)&&(""===e||"true"===e.toLowerCase())}r.lockChoiceExpression=i.uiLockChoice,i.$observe("placeholder",function(t){r.placeholder=void 0!==t?t:e.placeholder}),i.$observe("allowClear",a),a(i.allowClear),r.multiple&&r.sizeSearchInput()}}}]),i.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(n,i){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n,i=this,r=e.$select;angular.isUndefined(r.selected)&&(r.selected=[]),e.$evalAsync(function(){n=e.ngModel}),i.activeMatchIndex=-1,i.updateModel=function(){n.$setViewValue(Date.now()),i.refreshComponent()},i.refreshComponent=function(){r.refreshItems&&r.refreshItems(),r.sizeSearchInput&&r.sizeSearchInput()},i.removeChoice=function(n){if(r.isLocked(null,n))return!1;var a=r.selected[n],s={};return s[r.parserResult.itemName]=a,r.selected.splice(n,1),i.activeMatchIndex=-1,r.sizeSearchInput(),t(function(){r.onRemoveCallback(e,{$item:a,$model:r.parserResult.modelMapper(e,s)})}),i.updateModel(),!0},i.getPlaceholder=function(){if(!r.selected||!r.selected.length)return r.placeholder}}],controllerAs:"$selectMultiple",link:function(r,a,s,o){function l(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function c(e){var n=l(p.searchInput[0]),i=p.selected.length-1,r=f.activeMatchIndex,a=f.activeMatchIndex+1,s=f.activeMatchIndex-1,o=r;return!(n>0||p.search.length&&e==t.RIGHT||(p.close(),o=function(){switch(e){case t.LEFT:return~f.activeMatchIndex?s:i;case t.RIGHT:return~f.activeMatchIndex&&r!==i?a:(p.activate(),!1);case t.BACKSPACE:return~f.activeMatchIndex?f.removeChoice(r)?s:r:i;case t.DELETE:return!!~f.activeMatchIndex&&(f.removeChoice(f.activeMatchIndex),r)}}(),p.selected.length&&!1!==o?f.activeMatchIndex=Math.min(i,Math.max(0,o)):f.activeMatchIndex=-1,0))}function u(e){return void 0!==e&&void 0!==p.search&&e.filter(function(e){return void 0!==p.search.toUpperCase()&&void 0!==e&&e.toUpperCase()===p.search.toUpperCase()}).length>0}function d(e,t){var n=-1;if(angular.isArray(e))for(var i=angular.copy(e),r=0;r<i.length;r++)if(void 0===p.tagging.fct)i[r]+" "+p.taggingLabel===t&&(n=r);else{var a=i[r];angular.isObject(a)&&(a.isTag=!0),angular.equals(a,t)&&(n=r)}return n}var p=o[0],h=r.ngModel=o[1],f=r.$selectMultiple;p.multiple=!0,p.focusInput=p.searchInput,h.$isEmpty=function(e){return!e||0===e.length},h.$parsers.unshift(function(){for(var e,t={},n=[],i=p.selected.length-1;i>=0;i--)(t={})[p.parserResult.itemName]=p.selected[i],e=p.parserResult.modelMapper(r,t),n.unshift(e);return n}),h.$formatters.unshift(function(e){var t,n=p.parserResult&&p.parserResult.source(r,{$select:{search:""}}),i={};if(!n)return e;var a=[],s=function(e,n){if(e&&e.length){for(var s=e.length-1;s>=0;s--){if(i[p.parserResult.itemName]=e[s],t=p.parserResult.modelMapper(r,i),p.parserResult.trackByExp){var o=/(\w*)\./.exec(p.parserResult.trackByExp),l=/\.([^\s]+)/.exec(p.parserResult.trackByExp);if(o&&o.length>0&&o[1]==p.parserResult.itemName&&l&&l.length>0&&t[l[1]]==n[l[1]])return a.unshift(e[s]),!0}if(angular.equals(t,n))return a.unshift(e[s]),!0}return!1}};if(!e)return a;for(var o=e.length-1;o>=0;o--)s(p.selected,e[o])||s(n,e[o])||a.unshift(e[o]);return a}),r.$watchCollection(function(){return h.$modelValue},function(e,t){t!=e&&(angular.isDefined(h.$modelValue)&&(h.$modelValue=null),f.refreshComponent())}),h.$render=function(){if(!angular.isArray(h.$viewValue)){if(!e(h.$viewValue))throw n("multiarr","Expected model value to be array but got '{0}'",h.$viewValue);h.$viewValue=[]}p.selected=h.$viewValue,f.refreshComponent(),r.$evalAsync()},r.$on("uis:select",function(e,t){if(!(p.selected.length>=p.limit)){p.selected.push(t);var n={};n[p.parserResult.itemName]=t,i(function(){p.onSelectCallback(r,{$item:t,$model:p.parserResult.modelMapper(r,n)})}),f.updateModel()}}),r.$on("uis:activate",function(){f.activeMatchIndex=-1}),r.$watch("$select.disabled",function(e,t){t&&!e&&p.sizeSearchInput()}),p.searchInput.on("keydown",function(e){var n=e.which;r.$apply(function(){var i=!1;t.isHorizontalMovement(n)&&(i=c(n)),i&&n!=t.TAB&&(e.preventDefault(),e.stopPropagation())})}),p.searchInput.on("keyup",function(e){if(t.isVerticalMovement(e.which)||r.$evalAsync(function(){p.activeIndex=!1===p.taggingLabel?-1:0}),p.tagging.isActivated&&p.search.length>0){if(e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||t.isVerticalMovement(e.which))return;if(p.activeIndex=!1===p.taggingLabel?-1:0,!1===p.taggingLabel)return;var n,i,a,s=angular.copy(p.items),o=angular.copy(p.items),l=!1,c=-1;if(void 0!==p.tagging.fct){if((i=p.$filter("filter")(s,{isTag:!0})).length>0&&(a=i[0]),s.length>0&&a&&(l=!0,s=s.slice(1,s.length),o=o.slice(1,o.length)),n=p.tagging.fct(p.search),o.some(function(e){return angular.equals(e,n)})||p.selected.some(function(e){return angular.equals(e,n)}))return void r.$evalAsync(function(){p.activeIndex=0,p.items=s});n&&(n.isTag=!0)}else{if((i=p.$filter("filter")(s,function(e){return e.match(p.taggingLabel)})).length>0&&(a=i[0]),void 0!==s[0]&&s.length>0&&a&&(l=!0,s=s.slice(1,s.length),o=o.slice(1,o.length)),n=p.search+" "+p.taggingLabel,d(p.selected,p.search)>-1)return;if(u(o.concat(p.selected)))return void(l&&(s=o,r.$evalAsync(function(){p.activeIndex=0,p.items=s})));if(u(o))return void(l&&(p.items=o.slice(1,o.length)))}l&&(c=d(p.selected,n)),c>-1?s=s.slice(c+1,s.length-1):(s=[],n&&s.push(n),s=s.concat(o)),r.$evalAsync(function(){if(p.activeIndex=0,p.items=s,p.isGrouped){var e=n?s.slice(1):s;p.setItemsFn(e),n&&(p.items.unshift(n),p.groups.unshift({name:"",items:[n],tagging:!0}))}})}}),p.searchInput.on("blur",function(){i(function(){f.activeMatchIndex=-1})})}}}]),i.directive("uiSelectNoChoice",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){return t.addClass("ui-select-no-choice"),(t.parent().attr("theme")||e.theme)+"/no-choice.tpl.html"}}}]),i.directive("uiSelectSingle",["$timeout","$compile",function(n,i){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(r,a,s,o){var l=o[0],c=o[1];c.$parsers.unshift(function(t){if(e(t))return t;var n={};return n[l.parserResult.itemName]=t,l.parserResult.modelMapper(r,n)}),c.$formatters.unshift(function(t){if(e(t))return t;var n,i=l.parserResult&&l.parserResult.source(r,{$select:{search:""}}),a={};if(i){var s=function(e){return a[l.parserResult.itemName]=e,(n=l.parserResult.modelMapper(r,a))===t};if(l.selected&&s(l.selected))return l.selected;for(var o=i.length-1;o>=0;o--)if(s(i[o]))return i[o]}return t}),r.$watch("$select.selected",function(e){c.$viewValue!==e&&c.$setViewValue(e)}),c.$render=function(){l.selected=c.$viewValue},r.$on("uis:select",function(t,i){l.selected=i;var a={};a[l.parserResult.itemName]=i,n(function(){l.onSelectCallback(r,{$item:i,$model:e(i)?i:l.parserResult.modelMapper(r,a)})})}),r.$on("uis:close",function(e,t){n(function(){l.focusser.prop("disabled",!1),t||l.focusser[0].focus()},0,!1)}),r.$on("uis:activate",function(){u.prop("disabled",!0)});var u=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");i(u)(r),l.focusser=u,l.focusInput=u,a.parent().append(u),u.bind("focus",function(){r.$evalAsync(function(){l.focus=!0})}),u.bind("blur",function(){r.$evalAsync(function(){l.focus=!1})}),u.bind("keydown",function(e){return e.which===t.BACKSPACE&&!1!==l.backspaceReset?(e.preventDefault(),e.stopPropagation(),l.select(void 0),void r.$apply()):void(e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||(e.which!=t.DOWN&&e.which!=t.UP&&e.which!=t.ENTER&&e.which!=t.SPACE||(e.preventDefault(),e.stopPropagation(),l.activate()),r.$digest()))}),u.bind("keyup input",function(e){e.which===t.TAB||t.isControl(e)||t.isFunctionKey(e)||e.which===t.ESC||e.which==t.ENTER||e.which===t.BACKSPACE||(l.activate(u.val()),u.val(""),r.$digest())})}}}]),i.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,n){return{require:["^^uiSelect","^ngModel"],link:function(t,i,r,a){if(null===t[r.uiSelectSort])throw n("sort","Expected a list to sort");var s=a[0],o=a[1],l=angular.extend({axis:"horizontal"},t.$eval(r.uiSelectSortOptions)).axis,c="dragging",u="dropping",d="dropping-before",p="dropping-after";t.$watch(function(){return s.sortable},function(e){e?i.attr("draggable",!0):i.removeAttr("draggable")}),i.on("dragstart",function(e){i.addClass(c),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text",t.$index.toString())}),i.on("dragend",function(){g(c)});var h,f=function(e,t){this.splice(t,0,this.splice(e,1)[0])},g=function(e){angular.forEach(s.$element.querySelectorAll("."+e),function(t){angular.element(t).removeClass(e)})},m=function(e){e.preventDefault(),("vertical"===l?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0))<this["vertical"===l?"offsetHeight":"offsetWidth"]/2?(g(p),i.addClass(d)):(g(d),i.addClass(p))},v=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);e.cancel(h),h=e(function(){y(n)},20)},y=function(e){var n=t.$eval(r.uiSelectSort),a=n[e],s=null;s=i.hasClass(d)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,f.apply(n,[e,s]),o.$setViewValue(Date.now()),t.$apply(function(){t.$emit("uiSelectSort:change",{array:n,item:a,from:e,to:s})}),g(u),g(d),g(p),i.off("drop",v)};i.on("dragenter",function(){i.hasClass(c)||(i.addClass(u),i.on("dragover",m),i.on("drop",v))}),i.on("dragleave",function(e){e.target==i&&(g(u),g(d),g(p),i.off("dragover",m),i.off("drop",v))})}}}]),i.directive("uisOpenClose",["$parse","$timeout",function(e,t){return{restrict:"A",require:"uiSelect",link:function(n,i,r,a){a.onOpenCloseCallback=e(r.uisOpenClose),n.$watch("$select.open",function(e,i){e!==i&&t(function(){a.onOpenCloseCallback(n,{isOpen:e})})})}}}]),i.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var n=this;n.parse=function(n){var i;if(!(i=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/)))throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var r=i[5],a="";if(i[3]){r=i[5].replace(/(^\()|(\)$)/g,"");var s=i[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);s&&s[1].trim()&&(a=s[1],r=r.replace(a,""))}return{itemName:i[4]||i[2],keyName:i[3],source:t(r),filters:a,trackByExp:i[6],modelMapper:t(i[1]||i[4]||i[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}},n.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>'),e.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}]),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,i;!function(t){function r(e,t){return b.call(e,t)}function a(e,t){var n,i,r,a,s,o,l,c,u,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,y.nodeIdCompat&&S.test(e[s])&&(e[s]=e[s].replace(S,"")),e=h.slice(0,h.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(p=e[u]))e.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&f){for(u=(n=e.split("/")).length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(d=h.length;d>0;d-=1)if((r=f[h.slice(0,d).join("/")])&&(r=r[i])){a=r,o=u;break}if(a)break;!l&&g&&g[i]&&(l=g[i],c=u)}!a&&l&&(a=l,o=c),a&&(n.splice(0,o,a),e=n.join("/"))}return e}function s(e,n){return function(){var i=w.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(t,i.concat([e,n]))}}function o(e){return function(t){return a(t,e)}}function l(e){return function(t){m[e]=t}}function c(e){if(r(v,e)){var n=v[e];delete v[e],$[e]=!0,p.apply(t,n)}if(!r(m,e)&&!r($,e))throw new Error("No "+e);return m[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return function(){return y&&y.config&&y.config[e]||{}}}var p,h,f,g,m={},v={},y={},$={},b=Object.prototype.hasOwnProperty,w=[].slice,S=/\.js$/;f=function(e,t){var n,i=u(e),r=i[0];return e=i[1],r&&(r=a(r,t),n=c(r)),r?e=n&&n.normalize?n.normalize(e,o(t)):a(e,t):(e=a(e,t),i=u(e),r=i[0],e=i[1],r&&(n=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:d(e)}}},p=function(e,n,i,a){var o,u,d,p,h,y,b=[],w=void 0===i?"undefined":_typeof(i);if(a=a||e,"undefined"===w||"function"===w){for(n=!n.length&&i.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if(p=f(n[h],a),"require"===(u=p.f))b[h]=g.require(e);else if("exports"===u)b[h]=g.exports(e),y=!0;else if("module"===u)o=b[h]=g.module(e);else if(r(m,u)||r(v,u)||r($,u))b[h]=c(u);else{if(!p.p)throw new Error(e+" missing "+u);p.p.load(p.n,s(a,!0),l(u),{}),b[h]=m[u]}d=i?i.apply(m[e],b):void 0,e&&(o&&o.exports!==t&&o.exports!==m[e]?m[e]=o.exports:d===t&&y||(m[e]=d))}else e&&(m[e]=i)},e=n=h=function(e,n,i,r,a){if("string"==typeof e)return g[e]?g[e](n):c(f(e,n).f);if(!e.splice){if((y=e).deps&&h(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=a),r?p(t,e,n,i):setTimeout(function(){p(t,e,n,i)},4),h},h.config=function(e){return h(e)},e._defined=m,(i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(m,e)||r(v,e)||(v[e]=[e,t,n])}).amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&void 0,t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t)"function"==typeof t[i]&&"constructor"!==i&&n.push(i);return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,r=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),r=n.prototype.constructor),r.apply(this,arguments)}var r=t(n),a=t(e);n.displayName=e.displayName,i.prototype=new function(){this.constructor=i};for(var s=0;s<a.length;s++){var o=a[s];i.prototype[o]=e.prototype[o]}for(var l=0;l<r.length;l++){var c=r[l];i.prototype[c]=function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var r=n.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),r.apply(this,arguments)}}(c)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;i>n;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;e>n;n++)t+=Math.floor(36*Math.random()).toString(36);return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var r=0;r<n.length;r++){var a=n[r];(a=a.substring(0,1).toLowerCase()+a.substring(1))in i||(i[a]={}),r==n.length-1&&(i[a]=e[t]),i=i[a]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),r=n.style.overflowX,a=n.style.overflowY;return(r!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===r||"scroll"===a||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(t.message);i.append(n(r(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],r=this.option(i);t.push(r)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var t=e(this),n=e.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(r,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var r in i){var a=i[r];n.setAttribute(r,a)}if(t.children){var s=e(n),o=document.createElement("strong");o.className="select2-results__group",e(o),this.template(t,o);for(var l=[],c=0;c<t.children.length;c++){var u=t.children[c],d=this.option(u);l.push(d)}var p=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});p.append(l),s.append(o),s.append(p)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var i=this,r=t.id+"-results";this.$results.attr("id",r),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=i.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var r=n-1;0===e.length&&(r=0);var a=t.eq(r);a.trigger("mouseenter");var s=i.$results.offset().top,o=a.offset().top,l=i.$results.scrollTop()+(o-s);0===r?i.$results.scrollTop(0):0>o-s&&i.$results.scrollTop(l)}}),t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var r=t.eq(n);r.trigger("mouseenter");var a=i.$results.offset().top+i.$results.outerHeight(!1),s=r.offset().top+r.outerHeight(!1),o=i.$results.scrollTop()+s-a;0===n?i.$results.scrollTop(0):s>a&&i.$results.scrollTop(o)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){i.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,r=e.deltaY>0&&t-e.deltaY<=0,a=e.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):a&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),r=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:r}):i.trigger("close",{})):void i.trigger("select",{originalEvent:t,data:r})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,i=e.offset().top,r=this.$results.scrollTop()+(i-n),a=i-n;r-=2*e.outerHeight(!1),2>=t?this.$results.scrollTop(0):(a>this.$results.outerHeight()||0>a)&&this.$results.scrollTop(r)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),a=i(t,n);null==a?n.style.display="none":"string"==typeof a?n.innerHTML=r(a):e(n).append(a)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e,t){var i=this,r=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",r),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target).closest(".select2");e(".select2.select2-container--open").each(function(){var t=e(this);this!=n[0]&&t.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},r.prototype.bind=function(e,t){var n=this;r.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()}),e.on("selection:update",function(e){n.update(e.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},r.prototype.selectionContainer=function(){return e("<span></span>")},r.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)}else this.clear()},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,n){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!r.options.get("disabled")){var n=e(this).parent().data("data");r.trigger("unselect",{originalEvent:t,data:n})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var r=e[i],a=this.selectionContainer(),s=this.display(r,a);a.append(s),a.prop("title",r.title||r.text),a.data("data",r),t.push(a)}var o=this.$selection.find(".select2-selection__rendered");n.appendMany(o,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&void 0,this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var a={data:i[r]};if(this.trigger("unselect",a),a.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||(n.which==t.DELETE||n.which==t.BACKSPACE)&&this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),t.on("open",function(){r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){r.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===r.$search.val()){var t=r.$searchContainer.prev(".select2-selection__choice");if(t.length>0){var i=t.data("data");r.searchRemoveChoice(i),e.preventDefault()}}});var a=document.documentMode,s=a&&11>=a;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return s?void r.$selection.off("input.search input.searchcheck"):void r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&r.handleSearch(e)}})},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var r=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,a)){n=n||{};var i=e.Event("select2:"+t,{params:n});r.$element.trigger(i),-1!==e.inArray(t,s)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),i+=null!=n.id?"-"+n.id.toString():"-"+e.generateChars(4)},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),r=i.item(e);t.push(r)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var r=[];(e=[e]).push.apply(e,i);for(var a=0;a<e.length;a++){var s=e[a].id;-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple"))return e.selected=!1,n(e.element).is("option")?(e.element.selected=!1,void this.$element.trigger("change")):void this.current(function(i){for(var r=[],a=0;a<i.length;a++){var s=i[a].id;s!==e.id&&-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")})},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],r=this;this.$element.children().each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var a=r.item(t),s=r.matches(e,a);null!==s&&i.push(s)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),r=this._normalizeItem(e);return r.element=t,n.data(t,"data",r),i},i.prototype.item=function(e){var t={};if(null!=(t=n.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),r=[],a=0;a<i.length;a++){var s=n(i[a]),o=this.item(s);r.push(o)}t.children=r}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e});var t={selected:!1,disabled:!1};return null!=(e=n.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){for(var i=this,r=this.$element.find("option"),a=r.map(function(){return i.item(n(this)).id}).get(),s=[],o=0;o<e.length;o++){var l=this._normalizeItem(e[o]);if(n.inArray(l.id,a)>=0){var c=r.filter(function(e){return function(){return n(this).val()==e.id}}(l)),u=this.item(c),d=n.extend(!0,{},l,u),p=this.option(d);c.replaceWith(p)}else{var h=this.option(l);if(l.children){var f=this.convertToOptions(l.children);t.appendMany(h,f)}s.push(h)}}return s},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var r=n.ajax(e);return r.then(t),r.fail(i),r}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=a.transport(a,function(i){var a=r.processResults(i,e);r.options.get("debug")&&window.console&&console.error&&(a&&a.results&&n.isArray(a.results)||void 0),t(a)},function(){i.status&&"0"===i.status||r.trigger("results:message",{message:"errorLoading"})});r._request=i}var r=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var a=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof a.url&&(a.url=a.url.call(this.$element,e)),"function"==typeof a.data&&(a.data=a.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var r=i.get("tags"),a=i.get("createTag");void 0!==a&&(this.createTag=a);var s=i.get("insertTag");if(void 0!==s&&(this.insertTag=s),t.call(this,n,i),e.isArray(r))for(var o=0;o<r.length;o++){var l=r[o],c=this._normalizeItem(l),u=this.option(c);this.$element.append(u)}}return t.prototype.query=function(e,t,n){function i(e,a){for(var s=e.results,o=0;o<s.length;o++){var l=s[o],c=null!=l.children&&!i({results:l.children},!0);if(l.text===t.term||c)return!a&&(e.data=s,void n(e))}if(a)return!0;var u=r.createTag(t);if(null!=u){var d=r.option(u);d.attr("data-select2-tag",!0),r.addOptions([d]),r.insertTag(s,u)}e.results=s,n(e)}var r=this;return this._removeOldTags(),null==t.term||null!=t.page?void e.call(this,t,n):void e.call(this,t,i)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){function r(e){a.trigger("select",{data:e})}var a=this;n.term=n.term||"";var s=this.tokenizer(n,this.options,function(t){var n=a._normalizeItem(t);if(!a.$element.find("option").filter(function(){return e(this).val()===n.id}).length){var i=a.option(n);i.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([i])}r(n)});s.term!==n.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),n.term=s.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,r){for(var a=i.get("tokenSeparators")||[],s=n.term,o=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};o<s.length;){var c=s[o];if(-1!==e.inArray(c,a)){var u=s.substr(0,o),d=l(e.extend({},n,{term:u}));null!=d?(r(d),s=s.substr(o+1)||"",o=0):o++}else o++}return{term:s}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(r){var a=null!=r?r.length:0;return i.maximumSelectionLength>0&&a>=i.maximumSelectionLength?void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):void e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),n.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),n.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),n.on("focus",function(){n.isOpen()&&r.$search.focus()}),n.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var r=t[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),n.on("query",function(e){r.lastParams=e,r.loading=!0}),n.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,r.$loadingMore[0]);!r.loading&&t&&r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,r=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),r||(r=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var r=this,a="scroll.select2."+i.id,s="resize.select2."+i.id,o="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(a,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(a+" "+s+" "+o,function(e){r._positionDropdown(),r._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var r="scroll.select2."+i.id,a="resize.select2."+i.id,s="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(r),e(window).off(r+" "+a+" "+s)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=a.top,s.bottom=a.top+s.height;var o={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},c=l.top<a.top-o.height,u=l.bottom>a.bottom+o.height,d={left:a.left,top:s.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left,n||i||(r="below"),u||!c||n?!c&&u&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(d.top=s.top-h.top-o.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];r.children?n+=e(r.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=i.data("data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,r,a,s,o,l,c,u,d,p,h,f,g,m,v,y,$,b,w,S,_,x,C,E,P,A){function k(){this.reset()}return k.prototype.apply=function(d){if(null==(d=e.extend(!0,{},this.defaults,d)).dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=h:d.dataAdapter=p,d.minimumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.maximumSelectionLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,$)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,g)),(null!=d.tokenSeparators||null!=d.tokenizer)&&(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null!=d.query){var A=t(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,A)}if(null!=d.initSelection){var k=t(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,k)}}if(null==d.resultsAdapter&&(d.resultsAdapter=n,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,_)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,S)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,E))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=b;else{var I=c.Decorate(b,w);d.dropdownAdapter=I}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,C)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,P)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var O=t(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,O)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,x)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=r:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,o)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var R=t(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,R)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var T=d.language.split("-")[0];d.language=[d.language,T]}else d.language=[d.language];if(e.isArray(d.language)){var D=new u;d.language.push("en");for(var U=d.language,M=0;M<U.length;M++){var N=U[M],L={};try{L=u.loadPath(N)}catch(e){try{N=this.defaults.amdLanguageBase+N,L=u.loadPath(N)}catch(e){d.debug&&window.console&&console.warn&&void 0;continue}}D.extend(L)}d.translations=D}else{var q=u.loadPath(this.defaults.amdLanguageBase+"en"),F=new u(d.language);F.extend(q),d.translations=F}return d},k.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return d[e]||e})}function n(i,r){if(""===e.trim(i.term))return r;if(r.children&&r.children.length>0){for(var a=e.extend(!0,{},r),s=r.children.length-1;s>=0;s--)null==n(i,r.children[s])&&a.children.splice(s,1);return a.children.length>0?a:n(i,a)}var o=t(r.text).toUpperCase(),l=t(i.term).toUpperCase();return o.indexOf(l)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:A,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},k.prototype.set=function(t,n){var i={};i[e.camelCase(t)]=n;var r=c._convertData(i);e.extend(this.defaults,r)},new k}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function r(t,r){if(this.options=t,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var a=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,a)}}return r.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&void 0,e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&void 0,e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var r={};r=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var a=t.extend(!0,{},r);a=i._convertData(a);for(var s in a)t.inArray(s,n)>-1||(t.isPlainObject(this.options[s])?t.extend(this.options[s],a[s]):this.options[s]=a[s]);return this},r.prototype.get=function(e){return this.options[e]},r.prototype.set=function(e,t){this.options[e]=t},r}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var r=function e(n,i){null!=n.data("select2")&&n.data("select2").destroy(),this.$element=n,this.id=this._generateId(n),i=i||{},this.options=new t(i,n),e.__super__.constructor.call(this);var r=n.attr("tabindex")||0;n.data("old-tabindex",r),n.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(n,this.options);var s=this.render();this._placeContainer(s);var o=this.options.get("selectionAdapter");this.selection=new o(n,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(n,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var c=this.options.get("resultsAdapter");this.results=new c(n,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){u.trigger("selection:update",{data:e})}),n.addClass("select2-hidden-accessible"),n.attr("aria-hidden","true"),this._syncAttributes(),n.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},r.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var r=e.outerWidth(!1);return 0>=r?"auto":r+"px"}if("style"==t){var a=e.attr("style");if("string"!=typeof a)return null;for(var s=a.split(";"),o=0,l=s.length;l>o;o+=1){var c=s[o].replace(/\s/g,"").match(n);if(null!==c&&c.length>=1)return c[1]}return null}return t},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},r.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,r){-1===e.inArray(i,n)&&t.trigger(i,r)})},r.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var r=0;r<t.addedNodes.length;r++)t.addedNodes[r].selected&&(n=!0);else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},r.prototype.trigger=function(e,t){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var a=i[e],s={prevented:!1,name:e,args:t};if(n.call(this,a,s),s.prevented)return void(t.prevented=!0)}n.call(this,e,t)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&void 0,(null==e||0===e.length)&&(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&void 0;var e=[];return this.dataAdapter.current(function(t){e=t}),e},r.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&void 0,null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},r}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,i){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if("object"==(void 0===(t=t||{})?"undefined":_typeof(t)))return this.each(function(){var i=e.extend(!0,{},t);new n(e(this),i)}),this;if("string"==typeof t){var i,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&void 0,i=n[t].apply(n,a)}),e.inArray(t,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(e,t){var n={};return e&&angular.extend(n,e),{require:"ngModel",priority:1,compile:function(e,i){var r,a,s,o=e.is("select"),l=angular.isDefined(i.multiple);return e.is("select")&&(a=e.find("option[ng-repeat], option[data-ng-repeat]")).length&&(s=a.attr("ng-repeat")||a.attr("data-ng-repeat"),r=jQuery.trim(s.split("|")[0]).split(" ").pop()),function(e,a,s,c){var u=angular.extend({},n,e.$eval(s.uiSelect2)),d=function(e){var t;return u.simple_tags?(t=[],angular.forEach(e,function(e,n){t.push(e.id)})):t=e,t},p=function(e){var t=[];return e?(u.simple_tags?(t=[],angular.forEach(e,function(e,n){t.push({id:e,text:e})})):t=e,t):t};if(o?(delete u.multiple,delete u.initSelection):l&&(u.multiple=!0),c&&(e.$watch(i.ngModel,function(e,t){e&&e!==t&&c.$render()},!0),c.$render=function(){if(o)a.select2("val",c.$viewValue);else if(u.multiple){var e=c.$viewValue;angular.isString(e)&&(e=e.split(",")),a.select2("data",p(e))}else angular.isObject(c.$viewValue)?a.select2("data",c.$viewValue):c.$viewValue?a.select2("val",c.$viewValue):a.select2("data",null)},r&&e.$watch(r,function(e,n,i){angular.equals(e,n)||t(function(){a.select2("val",c.$viewValue),a.trigger("change"),e&&!n&&c.$setPristine&&c.$setPristine(!0)})}),c.$parsers.push(function(e){return a.prev().toggleClass("ng-invalid",!c.$valid).toggleClass("ng-valid",c.$valid).toggleClass("ng-invalid-required",!c.$valid).toggleClass("ng-valid-required",c.$valid).toggleClass("ng-dirty",c.$dirty).toggleClass("ng-pristine",c.$pristine),e}),!o&&(a.bind("change",function(t){t.stopImmediatePropagation(),e.$$phase||e.$root.$$phase||e.$apply(function(){c.$setViewValue(d(a.select2("data")))})}),u.initSelection))){var h=u.initSelection;u.initSelection=function(e,t){h(e,function(e){c.$setViewValue(d(e)),t(e)})}}a.bind("$destroy",function(){a.select2("destroy")}),s.$observe("disabled",function(e){a.select2("enable",!e)}),s.$observe("readonly",function(e){a.select2("readonly",!!e)}),s.ngMultiple&&e.$watch(s.ngMultiple,function(e){s.$set("multiple",!!e),a.select2(u)}),t(function(){a.select2(u),a.val(c.$viewValue),c.$render(),u.initSelection||o||c.$setViewValue(d(a.select2("data")))})}}}}]);var ApplicationConfiguration={applicationModuleName:"mean",applicationModuleVendorDependencies:["ngResource","ui.router","ngSanitize","ngMessages","ngFileUpload","ngCookies","LocalStorageModule","ui.tinymce","ui.select","ui.select2"],registerModule:function(e,t){angular.module(e,t||[]),angular.module("mean").requires.push(e)}};angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider","$httpProvider",function(e,t){t.defaults.withCredentials=!0,e.html5Mode({enabled:window.enabledHtml5Mode,requireBase:!1}).hashPrefix("!")}]),angular.module(ApplicationConfiguration.applicationModuleName).config(["localStorageServiceProvider",function(e){e.setPrefix(ApplicationConfiguration.applicationModuleName)}]),angular.element(document).ready(function(){angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("core"),angular.module("core").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"/modules/admin-core/views/home.html"})}]),angular.module("core").factory("Authentication",["$window",function(e){return{user:e.user}}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var e=function(e){if(!e)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var t in e.roles)for(var n in this.roles)if(this.roles[n]===e.roles[t])return!0;return!1};this.validateMenuExistance=function(e){if(e&&e.length){if(this.menus[e])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(e){return this.validateMenuExistance(e),this.menus[e]},this.addMenu=function(t,n,i){return this.menus[t]={isPublic:n||!1,roles:i||this.defaultRoles,items:[],shouldRender:e},this.menus[t]},this.removeMenu=function(e){this.validateMenuExistance(e),delete this.menus[e]},this.addMenuItem=function(t,n,i,r,a,s,o,l){return this.validateMenuExistance(t),this.menus[t].items.push({title:n,link:i,menuItemType:r||"item",menuItemClass:r,uiRoute:a||"/"+i,isPublic:null===s||void 0===s?this.menus[t].isPublic:s,roles:null===o||void 0===o?this.menus[t].roles:o,position:l||0,items:[],shouldRender:e}),this.menus[t]},this.addSubMenuItem=function(t,n,i,r,a,s,o,l){this.validateMenuExistance(t);for(var c in this.menus[t].items)this.menus[t].items[c].link===n&&this.menus[t].items[c].items.push({title:i,link:r,uiRoute:a||"/"+r,isPublic:null===s||void 0===s?this.menus[t].items[c].isPublic:s,roles:null===o||void 0===o?this.menus[t].items[c].roles:o,position:l||0,shouldRender:e});return this.menus[t]},this.removeMenuItem=function(e,t){this.validateMenuExistance(e);for(var n in this.menus[e].items)this.menus[e].items[n].link===t&&this.menus[e].items.splice(n,1);return this.menus[e]},this.removeSubMenuItem=function(e,t){this.validateMenuExistance(e);for(var n in this.menus[e].items)for(var i in this.menus[e].items[n].items)this.menus[e].items[n].items[i].link===t&&this.menus[e].items[n].items.splice(i,1);return this.menus[e]},this.addMenu("topbar")}]),angular.module("core").factory("Notice",["$rootScope","$transitions",function(e,t){function n(t,n,r){var r=void 0!==r&&r;i.push({type:n,message:t}),r&&e.$broadcast("requireChange")}var i=[],r="",a="";return t.onStart({},function(e){r=a,a=i.shift()||""}),t.onError({},function(e){i.push(r),a=""}),e.$on("requireChange",function(){r=a,a=i.shift()||""}),{setNotice:n,error:function(e,t){n(e,"ERROR",t)},success:function(e,t){n(e,"SUCCESS",t)},info:function(e,t){n(e,"INFO",t)},getNotice:function(){return a},requireChange:function(){e.$broadcast("requireChange")},SUCCESS:"SUCCESS",ERROR:"ERROR",INFO:"INFO",clearNotice:function(){i=[],a="",e.$broadcast("CLEAR_NOTICE")}}}]),ApplicationConfiguration.registerModule("auth"),angular.module("auth").config(["$stateProvider",function(e){}]),angular.module("auth").controller("AuthenticationController",["$scope","$http","$location","$window","Authentication","$cookies",function(e,t,n,i,r,a){e.authentication=r,e.webUrl=i.settings.services.webUrl,e.signin=function(){e.isSubmit=!0;var n=e.credentials;n.scope="admin",t.post(i.settings.services.apiUrl+"/api/user/login",n).then(function(t){200==t.status&&((t=t.data).token&&(i.location.href="/"),e.error=t.message)}).catch(function(t){e.error=t.data.message})},e.signout=function(){t.get(i.settings.services.apiUrl+"/api/user/logout").then(function(t){200==t.status&&(t=t.data,e.authentication.user="",a.remove("token"),i.location.href="/")}).catch(function(t){e.error=t.data.message})}}]),angular.module("auth").factory("Authentication",["$window",function(e){return{user:e.user}}]),ApplicationConfiguration.registerModule("caches"),angular.module("caches").run(["Menus",function(e){e.addMenuItem("topbar","Cache","caches","dropdown","/caches(/create)?"),e.addSubMenuItem("topbar","caches","Danh sch","caches")}]).config(["$stateProvider",function(e){e.state("listCaches",{url:"/caches",templateUrl:"/modules/admin-cache/views/list-caches.client.view.html"})}]),angular.module("caches").controller("CachesController",["$scope","$window","$stateParams","$location","Option","Authentication","Caches","Notice","localStorageService","Upload",function(e,t,n,i,r,a,s,o,l,c){function u(){var t={page:e.currentPage,keyword:e.search.keyword};l.set("cache.filterData",{currentPage:e.currentPage,search:e.search}),s.query(t,function(t){void 0,e.caches=t.items,e.totalItems=t.totalItems,e.itemsPerPage=t.itemsPerPage,e.numberVisiblePages=t.numberVisiblePages,e.totalPage=t.totalPage||1})}e.authentication=a,e.filePath="/files/cache/",e.webUrl=t.settings.services.webUrl,a.user.name||i.path("signin"),e.types=r.getTypes(),e.statuses=r.getStatus(),e.gotoList=function(){i.path("caches")},e.remove=function(t){if(confirm("Do you want to remove?")){s.get({cacheId:t}).$remove({cacheId:t});for(var i in e.caches)e.caches[i]._id===t&&e.caches.splice(i,1);o.setNotice("Delete cache success!","SUCCESS"),n.cacheId?e.gotoList():o.requireChange()}},e.findOne=function(){e.cache=s.get({cacheId:n.cacheId},function(t){t.image&&(e.review_file_name=e.webUrl+"/files/cache/"+t.image)})},e.currentPage=1,e.search={},e.setPage=function(t){e.currentPage=t},e.pageChanged=function(t){e.currentPage=t,u()},e.find=function(){if($.isEmptyObject(i.search()))(t=l.get("cache.filterData"))&&(e.currentPage=t.currentPage,e.search=t.search);else{var t=i.search();e.currentPage=Number(t.currentPage)||1,e.search.keyword=t.keyword}u()},e.filter=function(){e.currentPage=1,u()},e.reset=function(){e.search.keyword="",e.currentPage=1,u()},e.removeAll=function(){confirm("Do you want to remove all?")&&s.removeAll(function(t){t.status?(e.caches=[],o.setNotice("Delete all cache success!","SUCCESS",!0)):o.setNotice("Delete all cache error!","ERROR",!0)})}}]),angular.module("caches").factory("Caches",["$resource",function(e){return e("cache/:cacheId",{cacheId:"@_id"},{update:{method:"PUT"},query:{isArray:!1},removeAll:{url:"/cache/removeAll",method:"PUT"}})}]),ApplicationConfiguration.registerModule("categories"),angular.module("categories").run(["Menus",function(e){e.addMenuItem("topbar","Categories","categories","dropdown","/categories(/create)?"),e.addSubMenuItem("topbar","categories","List Categories","categories"),e.addSubMenuItem("topbar","categories","New Category","categories/create")}]).config(["$stateProvider",function(e){e.state("listCategories",{url:"/categories",templateUrl:"/modules/admin-category/views/list-categories.client.view.html"}).state("createCategory",{url:"/categories/create",templateUrl:"/modules/admin-category/views/create-category.client.view.html"}).state("viewCategory",{url:"/categories/:categoryId",templateUrl:"/modules/admin-category/views/view-category.client.view.html"}).state("editCategory",{url:"/categories/:categoryId/edit",templateUrl:"/modules/admin-category/views/edit-category.client.view.html"})}]),angular.module("categories").controller("CategoriesController",["$scope","$window","$stateParams","$location","Option","Authentication","Categories","Notice","localStorageService","Upload",function(e,t,n,i,r,a,s,o,l,c){function u(){var t={page:e.currentPage,keyword:e.search.keyword};l.set("category.filterData",{currentPage:e.currentPage,search:e.search}),s.query(t,function(t){e.categories=t.items,e.totalItems=t.totalItems,e.itemsPerPage=t.itemsPerPage,e.numberVisiblePages=t.numberVisiblePages,e.totalPage=t.totalPage||1})}e.authentication=a,e.filePath="/files/category/",e.webUrl=t.settings.services.webUrl,a.user.name||i.path("signin"),e.statuses=r.getStatus(),e.gotoList=function(){i.path("categories")},e.create=function(t,n){t?new s({name:this.name,slug:this.slug,status:this.status,description:this.description}).$save(function(t){t._id?(e.isLoading=!0,o.setNotice("Save category success!","SUCCESS"),n?e.gotoList():(i.path("categories/"+t._id+"/edit"),e.submitted=!1,e.name=null)):o.setNotice(t.message,"ERROR",!0)},function(e){o.setNotice(e.data.message,"ERROR",!0)}):o.setNotice("Please check your fields and try again!","ERROR",!0)},e.remove=function(t){if(confirm("Do you want to remove?")){s.get({categoryId:t}).$remove({categoryId:t},function(){});for(var i in e.categories)e.categories[i]._id===t&&e.categories.splice(i,1);o.setNotice("Delete category success!","SUCCESS"),n.categoryId?e.gotoList():o.requireChange()}},e.update=function(t,n){if(e.submitted=!0,t){var i=e.category;delete i.__v,delete i.created,i.$update(function(t){t.error?o.setNotice(response.message,"ERROR",!0):(e.isLoading=!0,o.setNotice("Update category success!","SUCCESS"),n?e.gotoList():(e.submitted=!1,o.requireChange()))},function(e){o.setNotice(e.data.message,"ERROR",!0)})}else o.setNotice("Please check your fields and try again!","ERROR",!0)},e.findOne=function(){e.category=s.get({categoryId:n.categoryId},function(t){t.image&&(e.review_file_name=e.webUrl+"/files/category/"+t.image)})},e.currentPage=1,e.search={},e.setPage=function(t){e.currentPage=t},e.pageChanged=function(t){e.currentPage=t,u()},e.find=function(){if($.isEmptyObject(i.search()))(t=l.get("category.filterData"))&&(e.currentPage=t.currentPage,e.search=t.search);else{var t=i.search();e.currentPage=Number(t.currentPage)||1,e.search.keyword=t.keyword}u()},e.filter=function(){e.currentPage=1,u()},e.reset=function(){e.search={},e.currentPage=1,u()}}]),angular.module("categories").factory("Categories",["$resource",function(e){return e("category/:categoryId",{categoryId:"@_id"},{update:{method:"PUT"},query:{isArray:!1},getByIdentity:{method:"GET",url:"/category/:identity/identity",params:{identity:"@identity"}}})}]),angular.module("core").directive("ckEditor",[function(){return{require:"?ngModel",restrict:"AEC",link:function(e,t,n,i){function r(){if(s.length){var e=s.splice(0,1);o.setData(e[0]||"<span></span>",function(){r(),a=!0})}}var a=!1,s=[],o=CKEDITOR.replace(t[0]);o.on("instanceReady",function(e){i&&r()}),t.bind("$destroy",function(){o.destroy(!1)}),i&&(o.on("change",function(){e.$apply(function(){var e=o.getData();"<span></span>"==e&&(e=null),i.$setViewValue(e)})}),i.$render=function(e){void 0===i.$viewValue&&(i.$setViewValue(""),i.$viewValue=""),s.push(i.$viewValue),a&&(a=!1,r())})}}}]),angular.module("core").directive("noticeDir",["Notice","$rootScope",function(e,t){var n=function(t,n){return n==e.ERROR?'<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button><h4><i class="icon fa fa-exclamation-triangle"></i> Error!</h4><div>'+t+"</div></div>":n==e.INFO?'<div class="alert alert-info alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button><h4><i class="icon fa fa-info"></i> Infomation!</h4><div>'+t+"</div></div>":'<div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button><h4><i class="icon fa fa-check"></i> Success!</h4><div>'+t+"</div></div>"};return{restrict:"E",template:function(i,r){var a=e.getNotice();if(t.$on("CLEAR_NOTICE",function(){i.empty()}),t.$on("requireChange",function(){(a=e.getNotice()).type==e.ERROR?i.html(n(a.message,e.ERROR)):a.type==e.INFO?i.html(n(a.message,e.INFO)):i.html(n(a.message,e.SUCCESS))}),""!=a)return a.type==e.ERROR?n(a.message,e.ERROR):a.type==e.INFO?n(a.message,e.INFO):n(a.message,e.SUCCESS)}}}]),angular.module("core").directive("errorMessage",function(){return{restrict:"E",template:function(e,t){return'<div ng-message="required">'+(t.requireMsg||"You did not enter a field")+'</div><div ng-message="email">You did not enter a email format</div><div ng-message="pattern">You did not enter a right pattern</div><div ng-message="number">You did not enter a number</div><div ng-message="min">You should enter bigger value</div><div ng-message="max">You should enter smaller value</div><div ng-message="minlength">'+(t.minlength?"You should enter longer than "+(t.minlength-1)+" characters":"You should enter longer in this field")+'</div><div ng-message="maxlength">'+(t.maxlength?"You should enter shorter than "+(t.maxlength+1)+" characters":"You should enter shorter in this field")+"</div>"}}}),angular.module("core").directive("ngLoading",function(){return{restrict:"AE",link:function(e,t,n){e.$watch(n.loadingDone,function(e){e?t.html('<div id="preview-area"><div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div><div class="mfp-bg bzFromTop mfp-ready"></div>'):t.html("")})}}}),angular.module("core").directive("slugGenerator",["$timeout",function(e){return{restrict:"A",scope:{slugGenerator:"=",ngModel:"="},link:function(t,n,i){var r;t.$watch("slugGenerator",function(n){n?(e.cancel(r),r=e(function(){t.$applyAsync(function(){t.ngModel=slug(n,{lower:!0})})},150)):t.$applyAsync(function(){t.ngModel=null})})}}}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function(e,t,n){e.authentication=t,e.isCollapsed=!1,e.menu=n.getMenu("topbar")}]),angular.module("core").controller("HomeController",["$scope","$location","Authentication",function(e,t,n){e.authentication=n,e.checkAuth=function(){n.user.name||t.path("signin")}}]),angular.module("core").factory("Option",["$rootScope",function(e){var t=[{name:"Publish",value:1},{name:"Unpublish",value:0}],n=[{name:"Publish",value:1},{name:"Unpublish",value:0}],i=[{name:"Yes",value:1},{name:"No",value:0}],r=[{name:"Yes",value:1},{name:"No",value:0}],a=["admin","user"],s=[{name:"male",value:"male"},{name:"female",value:"female"}],o=[{name:"Product",value:"product"},{name:"Post",value:"post"},{name:"Banner",value:"banner"}],l=[{name:"home",value:"home"},{name:"right",value:"right"}],c=[{name:"top",value:"top"},{name:"right",value:"right"},{name:"home",value:"home"}],u=[{name:"Product",value:"product"},{name:"Post",value:"post"}];return{getStatus:function(){return t},getTagStatus:function(){return n},getRoles:function(){return a},getGenders:function(){return s},getFeatures:function(){return i},getTypes:function(){return o},getYesNo:function(){return r},getPositions:function(){return l},getAdsPositions:function(){return c},getTagType:function(){return u}}}]),angular.module("core").service("SearchSelectSvc",["$rootScope",function(e){return{updateNgModel:function(t){e.$broadcast("UPDATE_NG_MODEL",t)}}}]),angular.module("core").directive("searchSelect",["$compile","$timeout","$rootScope",function(e,t,n){return{restrict:"AE",require:"ngModel",replace:!0,transclude:!0,scope:{itemShowLabel:"@",itemShowValue:"@",placeholder:"@",class:"@",style:"@",inputClass:"@",fetchDataFunc:"=",selectData:"=",hideInputWhenHasData:"=",panelStyle:"@",multiSelect:"=?"},templateUrl:"/modules/admin-core/views/js/template/search-select.html",link:function(e,i,r,a){function s(t){var n=0,i=null;for(var r in t)if(p.includes(t[r][e.itemShowValue])||(n++,i||(i=[]),i.push(t[r])),n>=d)break;return i}function o(t){if(p=[],t&&t.length){for(var n in t)p.push(t[n][e.itemShowValue]);e.selectItem=t}else e.selectItem=null}function l(e){e||(e=u?[]:null),o(u?e:e?[e]:null)}function c(){var t;(t=u?e.selectItem:e.selectItem[0]||null)?a.$setViewValue(JSON.parse(JSON.stringify(t))):a.$setViewValue(null)}var u=e.multiSelect||!0,d=1,p=[];e.showInput=!0,e.$watch("selectData",function(t){t&&t.length?e.resultItems=s(t):e.resultItems=null}),t(function(){l(null)},150),e.showSelectData=!1;var h;e.changeInputSearch=function(n){h&&t.cancel(h),h=t(function(){e.fetchDataFunc&&n&&e.fetchDataFunc(n),e.showSelectData=!0},300)},e.selectItem=function(t,n){if(void 0,u){var i=e.selectItem||[];e.hasExist(t)||(i.push(t),o(i))}else o([t]),e.hideInputWhenHasData&&(e.showInput=!1);c()},e.deSelectItem=function(t,n){if(u){var i=e.selectItem||[];e.hasExist(t)&&(i.splice(n,1),o(i))}else o(null);e.showInput=!0,c()},e.hasExist=function(t){return p.indexOf(t[e.itemShowValue])>-1},e.searchInputBlur=function(){t(function(){e.showSelectData=!1},150)},e.searchInputFocus=function(t){e.changeInputSearch(t),e.showSelectData=!0},n.$on("UPDATE_NG_MODEL",function(t,n){(n=n||e.ngModel)&&e.hideInputWhenHasData&&(e.showInput=!1),l(n)}),n.$on("RESET_SEARCH_INPUT",function(t,n){o(null),e.showInput=!0,c()})}}}]),angular.module("core").directive("status",function(){return{restrict:"EA",link:function(e,t,n){var i='<span class="label label-warning">unpublish</span>';1==n.status&&(i='<span class="label label-success">publish</span>'),t.append(i)}}}),ApplicationConfiguration.registerModule("pages"),angular.module("pages").run(["Menus",function(e){e.addMenuItem("topbar","Trang","pages","dropdown","/pages(/create)?"),e.addSubMenuItem("topbar","pages","Danh sch","pages"),e.addSubMenuItem("topbar","pages","To mi","pages/create")}]).config(["$stateProvider",function(e){e.state("listPages",{url:"/pages",templateUrl:"/modules/admin-page/views/list-pages.client.view.html"}).state("createPage",{url:"/pages/create",templateUrl:"/modules/admin-page/views/create-page.client.view.html"}).state("viewPage",{url:"/pages/:pageId",templateUrl:"/modules/admin-page/views/view-page.client.view.html"}).state("editPage",{url:"/pages/:pageId/edit",templateUrl:"/modules/admin-page/views/edit-page.client.view.html"})}]),angular.module("pages").controller("PagesController",["$scope","$rootScope","$stateParams","$location","Authentication","Pages","Notice","localStorageService",function(e,t,n,i,r,a,s,o){function l(){var t={target_id:e.currentPage,keyword:e.search.keyword};o.set("page.filterData",{currenttarget_id:e.currentPage,search:e.search}),a.query(t,function(t){e.pages=t.items,e.totalItems=t.totalItems,e.itemsPerPage=t.itemsPerPage,e.numberVisiblePages=t.numberVisiblePages,e.totalPage=t.totalPage||1})}e.authentication=r,r.user.name||i.path("signin"),e.gotoList=function(){i.path("pages")},e.tinyMceOptions={plugins:"advlist code"},e.create=function(t,n){var n=void 0!==n?n:null;e.submitted=!0,t?new a({title:this.title,intro:this.intro,content:this.content,identity:this.identity}).$save(function(t){t.error?s.setNotice(t.message,"ERROR",!0):(s.setNotice("Save page success!","SUCCESS"),n?e.gotoList():(i.path("pages/"+t._id+"/edit"),e.submitted=!1,e.title=""))},function(e){s.setNotice(e.data.message,"ERROR",!0)}):s.setNotice("Please check your fields and try again!","ERROR",!0)},e.remove=function(t){if(confirm("Do you want to remove?")){a.get({pageId:t}).$remove({pageId:t},function(){});for(var i in e.pages)e.pages[i]._id===t&&e.pages.splice(i,1);s.setNotice("Delete page success!","SUCCESS"),n.pageId?e.gotoList():s.requireChange()}},e.update=function(t,n){if(e.submitted=!0,t){var i=e.page;delete i.__v,delete i.created,i.$update(function(t){t.error?s.setNotice(t.message,"ERROR",!0):(s.setNotice("Update page success!","SUCCESS"),n?e.gotoList():(e.submitted=!1,s.requireChange()))},function(e){s.setNotice(e.data.message,"ERROR",!0)})}else s.setNotice("Please check your fields and try again!","ERROR",!0)},e.findOne=function(){e.page=a.get({pageId:n.pageId},function(){})},e.currentPage=1,e.search={},e.setPage=function(t){e.currentPage=t},e.pageChanged=function(t){e.currentPage=t,l()},e.find=function(){if($.isEmptyObject(i.search()))(t=o.get("page.filterData"))&&(e.currentPage=t.currentPage,e.search=t.search);else{var t=i.search();e.currentPage=Number(t.currentPage)||1,e.search.keyword=t.keyword}l()},e.filter=function(){e.currentPage=1,l()},e.reset=function(){e.search.keyword="",e.currentPage=1,l()}}]),angular.module("pages").factory("Pages",["$resource",function(e){return e("page/:pageId",{pageId:"@_id"},{update:{method:"PUT"},query:{isArray:!1}})}]),ApplicationConfiguration.registerModule("posts"),angular.module("posts").run(["Menus",function(e){e.addMenuItem("topbar","Chia s & tho lun","posts","dropdown","/posts(/create)?"),e.addSubMenuItem("topbar","posts","Danh sch bi vit","posts")}]).config(["$stateProvider",function(e){e.state("listPosts",{url:"/posts",templateUrl:"/modules/admin-post/views/list-posts.client.view.html"}).state("createPost",{url:"/posts/create",templateUrl:"/modules/admin-post/views/create-post.client.view.html"}).state("viewPost",{url:"/posts/:postId",templateUrl:"/modules/admin-post/views/view-post.client.view.html"}).state("editPost",{url:"/posts/:postId/edit",templateUrl:"/modules/admin-post/views/edit-post.client.view.html"})}]),angular.module("posts").controller("PostsController",["$scope","$stateParams","$location","$window","Option","Authentication","Posts","Categories","Notice","localStorageService","PostSvc","Tags","Users","SearchSelectSvc",function(e,t,n,i,r,a,s,o,l,c,u,d,p,h){function f(){var t={page:e.currentPage,keyword:e.search.keyword,communityId:e.search.communityId,category:e.search.category,tags:e.search.tags,status:e.search.status,feature:e.search.feature};c.set("post.filterData",{currentPage:e.currentPage,search:e.search}),s.query(t,function(t){e.items=t.items,e.totalItems=t.totalItems,e.itemsPerPage=t.itemsPerPage,e.numberVisiblePages=t.numberVisiblePages,e.totalPage=t.totalPage||1})}a.user.name||n.path("signin"),e.uploadApi=i.settings.services.uploadApi,e.webUrl=i.settings.services.webUrl,e.statuses=r.getStatus(),e.features=r.getFeatures(),e.posters=p.query({status:1},function(t){void 0}),e.authentication=a,e.tags={},e.renderSelect={},e.isUploadImage0=!1,e.isInvalidFile0=!1,e.postsPath="/files/posts/",e.tinymceOptions={plugins:"image",file_picker_types:"image",file_picker_callback:function(e,t,n){var i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept","image/*"),i.onchange=function(){var t=this.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){var i=t.name.substring(0,t.name.lastIndexOf("."))+"_"+(new Date).getTime(),r=tinymce.activeEditor.editorUpload.blobCache,a=n.result.split(",")[1],s=r.create(i,t,a);r.add(s),e(s.blobUri(),{title:t.name})}},i.click()},images_upload_handler:function(t,n,i){var r={file:t.base64(),name:t.filename()};u.uploadPostContentImage(r).then(function(t){if(200==t.status){var i=e.webUrl+e.postsPath+t.data.location;n(i)}})}},e.taglist=d.getList({},function(t){e.renderSelect.tag=!0}),e.users=p.query({role:"user",page:"all",status:1},function(e){}),e.isUploadImage=!1,e.isInvalidFile=!1,e.gotoList=function(){n.path("posts")},e.categories=o.query({}),e.create=function(t,i){e.submitted=!0,t?new s({title:this.title,slug:this.slug,feature:this.feature,image:this.image,thumb:this.thumb,content:this.content,status:this.status,category:this.category,attrs:this.attrs,communityId:this.community,tags:this.tag,user:this.user}).$save(function(t){var r={id:t._id};u.getImageFromContent(r).then(function(r){t.error?l.setNotice(t.message,"ERROR",!0):(l.setNotice("Save post success!","SUCCESS"),i?e.gotoList():(n.path("posts/"+t._id+"/edit"),e.submitted=!1,e.title=""))})},function(e){l.setNotice(e.data.message,"ERROR",!0)}):l.setNotice("Please check your fields and try again!","ERROR",!0)},e.remove=function(n){if(confirm("Do you want to remove?")){s.get({postId:n}).$remove({postId:n});for(var i in e.items)e.items[i]._id==n&&e.items.splice(i,1);l.setNotice("Delete post success!","SUCCESS"),t.postId?e.gotoList():l.requireChange()}},e.update=function(t,n){var n=void 0!==n?n:null;if(e.submitted=!0,t){var i=e.post;delete i.created,delete i.__v,i.$update(function(t){var i={id:t._id};u.getImageFromContent(i).then(function(i){t.error?l.setNotice(t.message,"ERROR",!0):(l.setNotice("Update page success!","SUCCESS"),n?e.gotoList():(l.requireChange(),e.submitted=!1))})},function(e){l.setNotice(e.data.message,"ERROR",!0)})}else l.setNotice("Please check your fields and try again!","ERROR",!0)},e.findOne=function(){e.post=s.get({postId:t.postId},function(t){e.post.thumb&&(e.review_thumb=e.webUrl+e.postsPath+t._id+"/"+e.post.thumb),e.post.image&&(e.review_image=e.webUrl+e.postsPath+t._id+"/"+e.post.image),e.post.user&&h.updateNgModel(e.post.user)})},e.currentPage=1,e.search={},e.setPage=function(t){e.currentPage=t},e.pageChanged=function(t){e.currentPage=t,f()},e.find=function(){if($.isEmptyObject(n.search()))(t=c.get("post.filterData"))&&(e.currentPage=t.currentPage,e.search=t.search);else{var t=n.search();e.currentPage=Number(t.currentPage)||1,e.search.keyword=t.keyword,e.search.category=t.category,e.search.status=isNaN(t.status)?null:Number(t.status),e.search.feature=isNaN(t.feature)?null:Number(t.feature)}f()},e.filter=function(){e.currentPage=1,f()},e.reset=function(){e.search.keyword="",e.search.category="",e.search.status="",e.search.feature="",e.search={},e.currentPage=1,f()},e.select2Options={tags:[],multiple:!0,simple_tags:!0,createSearchChoice:function(e,t){if(0===$(t).filter(function(){return 0===this.text.localeCompare(e)}).length)return{id:e,text:e}}},e.changeSlug=function(t,n){var i=slug(t).toLowerCase();n?e.post.slug=i:e.slug=i},e.fetchDataSearch=function(t){p.query({keyword:t,status:1},function(t){e.dataSearch=t.items})},e.changePoster=function(){void 0},e.posterOptions={}}]),angular.module("posts").factory("Posts",["$resource",function(e){return e("post/:postId",{postId:"@_id"},{update:{method:"PUT"},query:{isArray:!1}})}]),angular.module("posts").service("PostSvc",["$window","$http",function(e,t){return{uploadPostContentImage:function(n){return t.post(e.settings.services.userApi+"/api/upload/uploadPostContentImage",n)},getImageFromContent:function(n){return t.post(e.settings.services.userApi+"/api/post/getImageFromContent",n)}}}]),ApplicationConfiguration.registerModule("tag"),angular.module("tag").run(["Menus",function(e){e.addMenuItem("topbar","Tags","tag","dropdown","/tags(/create)?"),e.addSubMenuItem("topbar","tag","List Tags","tags"),e.addSubMenuItem("topbar","tag","New Tag","tags/create")}]).config(["$stateProvider",function(e){e.state("listTag",{url:"/tags",templateUrl:"/modules/admin-tag/views/list-tags.client.view.html"}).state("createTag",{url:"/tags/create",templateUrl:"/modules/admin-tag/views/create-tag.client.view.html"}).state("updateCountTag",{url:"/tags/update-count",templateUrl:"/modules/admin-tag/views/update-count-tag.client.view.html"}).state("viewTag",{url:"/tags/:tagId",templateUrl:"/modules/admin-tag/views/view-tag.client.view.html"}).state("editTag",{url:"/tags/:tagId/edit",templateUrl:"/modules/admin-tag/views/edit-tag.client.view.html"})}]),TagController.$inject=["$scope","$window","Tags","Option","$stateParams","Notice","$location","localStorageService","Upload","Authentication","$timeout","Categories"],angular.module("tag").controller("TagController",TagController),angular.module("tag").factory("Tags",["$resource","$window",function(e,t){return e("tag/:tagId",{tagId:"@_id"},{update:{method:"PUT"},query:{isArray:!1},getByIdentity:{method:"GET",url:"/category/:identity/identity",params:{identity:"@identity"}},convertCountTag:{method:"POST",url:t.settings.services.userApi+"/api/action/convertCountTag"},getList:{method:"GET",url:"/tag/getList"}})}]),ApplicationConfiguration.registerModule("users"),angular.module("users").run(["Menus",function(e){e.addMenuItem("topbar","Users","users","dropdown","/users(/create)?"),e.addSubMenuItem("topbar","users","List Users","users"),e.addSubMenuItem("topbar","users","New User","users/create")}]).config(["$stateProvider",function(e){e.state("listUsers",{url:"/users",templateUrl:"/modules/admin-user/views/list-users.client.view.html"}).state("listPendingSeller",{url:"/users/list-pending?pending_seller",templateUrl:"/modules/admin-user/views/list-users.client.view.html"}).state("customListUsers",{url:"/users/list-:listName?socialSource?role",templateUrl:"/modules/admin-user/views/list-users.client.view.html"}).state("listFilterUsers",{url:"/users?socialSource?role",templateUrl:"/modules/admin-user/views/list-users.client.view.html"}).state("createUser",{url:"/users/create",templateUrl:"/modules/admin-user/views/create-user.client.view.html"}).state("reportUser",{url:"/users/reportUser",templateUrl:"/modules/admin-user/views/report-user.view.html"}).state("viewProfile",{url:"/users/:userId/profile",templateUrl:"/modules/admin-user/views/profile.client.view.html"}).state("viewUser",{url:"/users/:userId",templateUrl:"/modules/admin-user/views/view-user.client.view.html"}).state("collectHistory",{url:"/users/:userId/collectHistory",templateUrl:"/modules/admin-user/views/list-collect-history.client.view.html"}).state("productBidHistory",{url:"/users/:userId/productBidHistory",templateUrl:"/modules/admin-user/views/list-product-bid-history.client.view.html"}).state("editUser",{url:"/users/:userId/edit",templateUrl:"/modules/admin-user/views/edit-user.client.view.html"})}]),angular.module("users").controller("UsersController",["SendNotify","$rootScope","$scope","$log","$stateParams","$location","$window","Authentication","Users","Option","Notice","$timeout","Upload","bzResourceSvc","localStorageService","Categories","$sce","PendingSellerSvc",function(e,t,n,i,r,a,s,o,l,c,u,d,p,h,f,g,m,v){function y(){n.isLoading=!0}function b(e){d(function(){n.isLoading=!1},e=void 0!==e?e:500)}function w(){n.user.ban&&n.user.ban.ban_to&&(n.user.ban.ban_to=new Date(n.user.ban.ban_to))}function S(e){if(r.filterCondition)switch(n.currentPage=1,r.filterCondition){case"facebook":n.search.socialSource="facebook";break;case"google":n.search.socialSource="google"}var t={page:n.currentPage,keyword:n.search.keyword,role:n.search.role,status:n.search.status,is_seed:n.search.is_seed,registerSource:n.search.registerSource,socialSource:n.search.socialSource,hasBidding:n.search.hasBidding,phoneVerify:n.search.phoneVerify,activity_scope:n.search.activity_scope,communityJoined:n.search.communityJoined,registerCommunity:n.search.registerCommunity,ban_status:n.search.ban_status,pending_seller:n.search.pending_seller};if(n.search.start_date&&(t.start_date=n.search.start_date),n.search.end_date&&(t.end_date=n.search.end_date),n.search.from_date&&(t.from_date=n.search.from_date),n.search.to_date&&(t.to_date=n.search.to_date),n.search.pending_seller&&(t.pending_seller=n.search.pending_seller),e)i="user.statisticCollectData";else var i="user.filterData";f.set(i,{currentPage:n.currentPage,search:n.search}),e?l.statisticCollect(t,function(e){n.users=e.items,n.totalItems=e.totalItems,n.itemsPerPage=e.itemsPerPage,n.numberVisiblePages=e.numberVisiblePages,n.totalPage=e.totalPage||1,b()}):l.query(t,function(e){void 0,n.users=e.items,n.totalItems=e.totalItems,n.itemsPerPage=e.itemsPerPage,n.numberVisiblePages=e.numberVisiblePages,n.totalPage=e.totalPage||1,b()})}function _(){if(y(),r.filterCondition)switch(n.currentPage=1,r.filterCondition){case"facebook":n.search.socialSource="facebook";break;case"google":n.search.socialSource="google"}var e={page:n.currentPage,keyword:n.search.keyword,role:n.search.role,status:n.search.status,is_seed:n.search.is_seed,registerSource:n.search.registerSource,socialSource:n.search.socialSource,hasBidding:n.search.hasBidding,phoneVerify:n.search.phoneVerify,activity_scope:n.search.activity_scope,ban_status:n.search.ban_status};n.search.start_date&&(e.start_date=n.search.start_date),n.search.end_date&&(e.end_date=n.search.end_date),n.search.from_date&&(e.from_date=n.search.from_date),n.search.to_date&&(e.to_date=n.search.to_date),l.statistic(e,function(e){void 0,n.users=e.items,n.totalItems=e.totalItems,n.itemsPerPage=e.itemsPerPage,n.numberVisiblePages=e.numberVisiblePages,n.totalPage=e.totalPage||1,n.statistic=e.statistic,n.statistic.userBidPercen=Math.round10(e.statistic.userBid/e.statistic.total*100,-2),n.statistic.userCollectPercen=Math.round10(e.statistic.userCollect/e.statistic.total*100,-2),n.statistic.userBidCollectPercen=Math.round10(e.statistic.userBidOrCollect/e.statistic.total*100,-2),b()})}function x(e,t){l.confirmSeller(e,function(e){t(e.status?!0:!1)})}n.authentication=o,o.user.name||a.path("signin"),n.uploadApi=s.settings.services.uploadApi,n.webUrl=s.settings.services.webUrl,n.gotoList=function(){var e=f.get("user.filterData"),t="/users",n=[];e.currentPage&&n.push("currentPage="+e.currentPage);for(var i in e.search)e.search[i]&&n.push(i+"="+e.search[i]);n.length&&(t+="?"+n.join("&")),window.location.href="/#!"+t},n.isUploadImage=!1,n.isInvalidFile=!1,n.user_roles=[],n.avatarPath="/files/avatar/",n.hasChangeSeller=!1,n.submitted=!1,n.changeImage=!1,n.changeCover=!1,n.search={},n.showDateLabel=function(){return n.search.hasBidding?{start_date:"Has bidding from",end_date:"Has bidding to"}:{start_date:"Created from",end_date:"Created to"}},n.resetFCC=function(e){l.resetFCC({id:e},function(e){e.status?u.setNotice("Reset Success","SUCCESS",!0):u.setNotice(e.message,"ERROR",!0)})},n.handleFileSelect=function(e,t){n.isLoading=!0,n.changeImage=!0;for(var i,r=e.target.files,a=0;i=r[a];a++)if(i.type.match("image.*")){if("avartar"==t){o={width:59,height:59,centerCrop:!0,restoreExif:!1};p.resize(r[a],o).then(function(e){p.dataUrl(e,!0).then(function(e){n.urlThumb=e})});var s={width:300,height:300,centerCrop:!0,restoreExif:!1};p.resize(r[a],s).then(function(e){p.dataUrl(e,!0).then(function(e){n.isLoading=!1,n.review_avatar=e})})}if("cover"==t){n.changeCover=!0;var o={width:1133,height:278,centerCrop:!0,restoreExif:!1};p.resize(r[a],o).then(function(e){p.dataUrl(e,!0).then(function(e){n.isLoading=!1,n.review_cover=e})})}}},n.statuses=c.getStatus(),n.userRoles=c.getRoles(),n.create=function(e,t){if(n.submitted=!0,n.isLoading=!0,this.password!=this.cfpassword&&(e=!1),!e)return n.isLoading=!1,void u.setNotice("Please check your fields and try again!","ERROR",!0);new l({name:this.name,email:this.email,password:this.password,cfpassword:this.cfpassword,status:this.status,roles:this.roles,slug:this.slug}).$save(function(e){e._id?(n.isLoading=!1,u.setNotice("Save user success!","SUCCESS"),"save&list"==t?n.gotoList():(a.path("users/"+e._id+"/edit"),n.name="",n.submitted=!1)):(u.setNotice(e.message,"ERROR",!0),n.isLoading=!1)},function(e){u.setNotice(e.data.message,"ERROR",!0),n.isLoading=!1})},n.remove=function(e,t){if(confirm("Do you want to remove?")){t?(l.get({userId:e}).$remove({userId:e}),u.setNotice("Delete user success!","SUCCESS")):l.moveToTrash({id:e},function(e){void 0,e.status&&u.setNotice(e.msg,"SUCCESS",!0)});for(var i in n.users)n.users[i]._id===e&&n.users.splice(i,1);r.userId?n.gotoList():u.requireChange()}},n.removeVerifyPhone=function(e){confirm("Do you want to remove verify phone?")&&l.removeVerifyPhone({id:e},function(e){e.status&&(u.setNotice(e.msg,"SUCCESS",!0),n.user.verify_phone&&(n.user.verify_phone.isVerify=!1))})},n.makeCollector=function(){var e=n.user;e.roles.indexOf("collector")<0&&(e.is_show_msg_invited_collector=1,e.roles.push("collector")),delete e.password,e.$update(function(e){e.error?u.setNotice(e.message,"ERROR",!0):u.setNotice("Update success","SUCCESS",!0)},function(e){u.setNotice(e.data.message,"ERROR",!0)})},n.update=function(e,t,r){if(n.isLoading=!0,n.submitted=!0,n.user.province&&!n.user.district&&(e=!1),n.password||(n.password=null),n.cfpassword||(n.cfpassword=null),n.cfpassword!=n.password&&(e=!1),!e)return n.isLoading=!1,void u.setNotice("Please check your fields and try again!","ERROR",!0);var a=n.user,o=n.user.province;delete a.__v,delete a.password_token,delete a.created,delete a.province,delete a.provider,delete a.activeToken,n.$log=i,a.password=n.password,a.cfpassword=n.cfpassword,a.is_send_notify=a.is_send_notify||0,a.$update(function(e){if(e.error)n.isLoading=!1,u.setNotice(e.message,"ERROR",!0);else{if(n.changeImage&&(n.review_avatar&&n.urlThumb||n.review_cover)){n.changeImage=!1;var i=e;n.nameUpdate=(new Date).getTime()+".png";var r=new FormData;if(n.review_avatar&&n.urlThumb&&(r.append("file",n.review_avatar),r.append("name",n.nameUpdate),r.append("thumb",n.urlThumb),i.avatar=n.nameUpdate),n.review_cover&&n.changeCover){var a=(new Date).getTime()+"_"+Math.floor(65536*(1+Math.random()))+".png";r.append("cover",n.review_cover),r.append("nameCover",a),i.cover=a,n.changeCover=!1}r.append("user_id",e._id),i.password=null,i.$update(function(e){var t={_id:e._id,name:e.name,avatar:e.avatar};l.updateFavoritesCache({user_data:t})});h.api(s.settings.services.userApi+"/api/upload/image-avatar").upload({},r,function(i){n.isLoading=!1,u.setNotice("Update user success!","SUCCESS"),"save&list"==t?n.gotoList():(n.submitted=!1,u.requireChange(),n.isSeller=!1,n.user.province=o,-1!=e.roles.indexOf("seller")&&(n.isSeller=!0))}).$promise}else{n.isLoading=!1;var c={_id:e._id,name:e.name,avatar:e.avatar};l.updateFavoritesCache({user_data:c}),u.setNotice("Update user success!","SUCCESS"),"save&list"==t?n.gotoList():(n.submitted=!1,u.requireChange(),n.isSeller=!1,n.user.province=o,angular.forEach(e.roles,function(e){"seller"!=e||(n.isSeller=!0)}))}w()}},function(e){n.isLoading=!1,u.setNotice(e.data.message,"ERROR",!0)})},n.render_select=!1,n.findOne=function(){n.user=l.get({userId:r.userId}),n.user.$promise.then(function(e){void 0})},n.findOneAndHistory=function(){n.user=l.get({userId:r.userId}),n.user.$promise.then(function(e){n.getCollectHistory()})},n.findOneAndBidHistory=function(){n.user=l.get({userId:r.userId}),n.user.$promise.then(function(e){n.getBidHistory()})},n.getCollectHistory=function(){l.collectHistory({user_id:n.user._id,page:n.currentPage},function(e){n.histories=e.items,n.totalItems=e.totalItems,n.itemsPerPage=e.itemsPerPage,n.numberVisiblePages=e.numberVisiblePages,n.totalPage=e.totalPage||1})},n.getBidHistory=function(){l.productBidHistory({user_id:n.user._id,page:n.currentPage},function(e){n.histories=e.items,n.totalItems=e.totalItems,n.itemsPerPage=e.itemsPerPage,n.numberVisiblePages=e.numberVisiblePages,n.totalPage=e.totalPage||1})},n.currentPage=1,n.setPage=function(e){n.currentPage=e},n.pageChanged=function(e){n.currentPage=e,S()},n.pageStatisticChanged=function(e){n.currentPage=e,_()},n.pageHistoryChanged=function(e){n.currentPage=e,n.getCollectHistory()},n.pageBidHistoryChanged=function(e){n.currentPage=e,n.getBidHistory()},n.find=function(e){if(y(),$.isEmptyObject(a.search())){if(e)t=f.get("user.statisticCollectData");else t=f.get("user.filterData");t&&(n.currentPage=t.currentPage,n.search=t.search)}else{var t=a.search();n.currentPage=Number(t.currentPage)||1,n.search.keyword=t.keyword,n.search.socialSource=t.socialSource,n.search.registerSource=t.registerSource,n.search.role=t.role,n.search.status=isNaN(t.status)?null:Number(t.status),n.search.is_seed=isNaN(t.is_seed)?null:Number(t.is_seed),n.search.hasBidding=isNaN(t.hasBidding)?null:Number(t.hasBidding),n.search.phoneVerify=t.phoneVerify,n.search.activity_scope=t.activity_scope,n.search.pending_seller=1==t.pending_seller}S(e)},n.findStatistic=function(){if(y(),!$.isEmptyObject(a.search())){var e=a.search();n.currentPage=Number(e.currentPage)||1,n.search.keyword=e.keyword,n.search.socialSource=e.socialSource,n.search.registerSource=e.registerSource,n.search.role=e.role,n.search.status=isNaN(e.status)?null:Number(e.status),n.search.is_seed=isNaN(e.is_seed)?null:Number(e.is_seed),n.search.hasBidding=isNaN(e.hasBidding)?null:Number(e.hasBidding),n.search.phoneVerify=e.phoneVerify,n.search.activity_scope=e.activity_scope}_()},n.filter=function(e,t){n.currentPage=1,t?_():S(e)},n.reset=function(e){n.search={},e?_():S()},n.sendMail=function(){var t=n.user;e.sendnotifytoseller({name:t.name,email:t.email},function(n){n.status?(u.setNotice(n.msg,"SUCCESS",!0),e.changesendnotifystatus({id:t._id,is_send_notify:1},function(e){void 0})):u.setNotice(n.msg,"ERROR",!0)})},n.isOpen={start_date:!1,end_date:!1,ban_to:!1},n.openCalendar=function(e){"start_date"==e?n.isOpen.start_date=!0:"end_date"==e?n.isOpen.end_date=!0:n.isOpen.ban_to=!0},n.isOpenEndDate=!1,n.openEndDate=function(){n.isOpenEndDate=!0},n.closeEndDate=function(){n.isOpenEndDate=!1},n.changeSearchDate=function(e,t,i,r){e&&t&&e>t&&(i?t=e:e=new Date(t.getTime()-864e5)),e&&e>=Date.now()&&-1!=n.search.bid_status&&(n.search.bid_status=""),t&&t>=Date.now()&&-1!=n.search.bid_status&&(n.search.bid_status=""),e&&e<=Date.now()&&1!=n.search.bid_status&&(n.search.bid_status=""),t&&t<=Date.now()&&1!=n.search.bid_status&&(n.search.bid_status=""),n.search.start_date=e,n.search.end_date=t,r?n.filter(!1,!0):n.filter()},n.changeStatisticDate=function(e,t,i){e&&t&&e>t&&(i?t=e:e=new Date(t.getTime()-864e5)),n.search.start_date=e,n.search.end_date=t,n.filter(!0)},n.changeHasBidding=function(){n.currentPage=1,n.search.start_date=new Date,n.search.end_date=new Date,n.filter()},n.putback=function(e){l.get({userId:e},function(t){t.status=0,t.phone=t.phone.replace("trash",""),t.email=t.email.replace(/_remove_\d+/g,""),t.password=null,t.cfpassword=null,t.$update({},function(t){if(t._id){for(var i in n.users)n.users[i]._id===e&&n.users.splice(i,1);u.setNotice("Put user back success!","SUCCESS"),u.requireChange(),n.submitted=!1}else u.setNotice(t.message,"ERROR",!0)},function(e){u.setNotice(e.data.message,"ERROR",!0)})})},n.verifyPhone=function(){confirm("Are you sure?")&&n.user&&(n.user.phone?(n.user.verify_phone={isVerify:!0,phone:n.user.phone,verify_date:new Date,generate_date:new Date,times:n.user.verify_phone.times},n.update(!0)):u.setNotice("Please enter phone number before submit verify!","ERROR",!0))},n.changeSlug=function(e,t){var i=slug(e).toLowerCase();t?n.user.slug=i:n.slug=i},n.checkScopeRequired=function(e){return!!(e&&e.length&&e.indexOf("seller")>-1)&&"required"},n.changeUserRoles=function(e){n.hasChangeSeller=-1!=e.indexOf("seller")},n.pendingSellerStatus=function(e){if(1==e)return{label:"Yes (Confirm Now)",class:"btn-danger"}},n.openApproveModal=function(e){1==e.pendingSeller&&v.openApproveModal(e)},n.publishPending=function(e,t){x(e,function(e){e&&$("#pending-modal").on("hidden.bs.modal",function(e){d(function(){S()})}),t(e)})}}]),angular.module("users").factory("Users",["$resource","$window",function(e,t){return e("user/:userId",{userId:"@_id"},{update:{method:"PUT"},query:{isArray:!1},getUserBid:{url:"/user/productBid/:product_id",method:"GET",params:{product_id:"@product_id"}},userByComment:{url:"/user/userByComment/:product_id",method:"GET",params:{product_id:"@product_id"}},userByFavorite:{url:"/user/userByFavorite/:product_id",method:"GET",params:{product_id:"@product_id"}},moveToTrash:{url:"/user/moveToTrash",method:"PUT",params:{id:"@id"}},removeVerifyPhone:{url:"/user/removeVerifyPhone",method:"PUT",params:{id:"@id"}},resetFCC:{url:"/user/resetFCC",method:"POST",payload:{id:"@id"}},statisticCollect:{url:"/user/statisticCollect",method:"GET",isArray:!1},collectHistory:{url:"/user/collectHistory",method:"POST",payload:{user_id:"@user_id",page:"@page"}},productBidHistory:{url:"/user/productBidHistory",method:"POST",payload:{user_id:"@user_id",page:"@page"}},statistic:{url:"/user/Statistic",method:"GET"},userSeed:{url:"/user/getSeed",method:"GET"},updateFavoritesCache:{method:"POST",url:t.settings.services.userApi+"/api/favorite/update-favorite-cache",payload:{data:"@data"}},confirmSeller:{method:"PUT",url:"/user/:user_id",params:{user_id:"@user_id",name:"@name",checkBtnConfirm:"@checkBtnConfirm"}}})}]),angular.module("users").factory("SendNotify",["$resource","$window",function(e,t){return e(t.settings.services.uploadApi+"/api/user/sendnotifytoseller",null,{sendnotifytoseller:{method:"POST",params:{name:"@name",email:"@email"}},changesendnotifystatus:{url:"/user/change-send-notify-status",method:"PUT",params:{id:"@id",is_send_notify:"@is_send_notify"}}})}]),angular.module("users").service("bzResourceSvc",["$resource",function(e){return{api:function(t,n,i){(i=i||{}).get=angular.extend({},i.get),i.query=angular.extend({isArray:!0},i.query),i.save=angular.extend({method:"POST"},i.save),i.update=angular.extend({method:"PUT"},i.update),i.upload=angular.extend({method:"POST",headers:{"Content-Type":void 0},transformRequest:angular.identity},i.upload);var r="";return t.indexOf(".json")>-1||t.indexOf("http://")>-1||t.indexOf("https://"),r=t,e(r,n,i)}}}]).service("PendingSellerSvc",["$rootScope",function(e){return{openApproveModal:function(t){e.$broadcast("OPEN_APPROVE_MODAL",{user:t})}}}]);